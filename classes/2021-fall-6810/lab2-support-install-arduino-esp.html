<!DOCTYPE html>
<html>
<head>
	<title>HCI Engineering Group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- CSAIL ICON -->
	<link rel="CSAIL" href="../../images/icon/csail.ico" type="image/x-icon" />

	<!-- Bootstrap -->
	<link href="../../css/bootstrap.css" rel="stylesheet">
	<link href="../../css/custom-style.css" rel="stylesheet">
	
	<!-- jQuery --> 
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">
	
	<!-- Google Analytic -->
	<script type="text/javascript" src="../../js/analytics.js"></script>
	
	<style>
	.etech-sch-col1 {width:60px; border: 1px solid black;}
	.etech-sch-col2 {width:120px; border: 1px solid black;}
	.etech-sch-col3 {width:450px; border: 1px solid black;}
	.etech-sch-col4 {width:100px; border: 1px solid black;}
	</style>
</head>

<body>
<header class="main_header">
	<!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
  <div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
       
       </br>
       </br>
       </br>
       </br>
       
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2021)</a><br></h>
         <h2 class="headline">Install Arduino IDE and ESP Drivers</h2>

In class, we will use the ESP32 as the microcontroller and the Arduino IDE for programming the ESP. Below you find the install steps to set everything up on your computer.<br>

<h3>Steps:</h3>
<ol>
	<li><a href="#1">Install Arduino IDE</a></li>
	<li><a href="#2">Install ESP Core Board Manager</a></li>
	<li><a href="#3">Install USB Cable Driver</a></li>
	<li><a href="#4">Upload Test Program to ESP32</a></li>
</ol>

<h3 id="1">(1) Install Arduino IDE</h3>

<b>Windows, Mac, *Nix Users:</b> First, install the Arduino IDE. Even if you've already got it, install it again to get the most up-to-date distribution. The Arduino IDE can be <a href="https://www.arduino.cc/en/Main/Software">found here</a>. Download the appropriate distribution for your laptop's operating system. For <code>Windows Users</code> it is important to <code>NOT</code> install the Windows App, and instead install only the regular Windows distribution.<br><br>

<h3 id="2">(2) Install ESP Core Board Manager</h3>

Next install the ESP32 core.<br><br>

<b>Windows, Mac Users:</b> Open the Arduino IDE and do the following:
<ul>
  <li>In <code>Windows,</code> go to <code>File>Preferences</code>. In <code>MacOS,</code> go to <code>Arduino>Preferences</code>.</li>
  <li>Under the <code>Additional Boards Manager URL field</code> paste in: <code>https://dl.espressif.com/dl/package_esp32_index.json</code> and then click <code>OK</code></li>
  <li>Now go to <code>Tools>Boards>Boards Manager</code></li>
  <li>In the window that pops up, search for <code>esp32</code>. One option should appear. Install it.</li>
  <li>Close your Arduino IDE and reopen it.</li>
  <li>Now check under <code>Tools>Board</code> if you can select the <code>DOIT ESP32 DEVKIT V1</code>. If you see it, you can move on.</li>
</ul>

<b>*Nix Users:</b> We strongly recommend installing the ESP core directly from the git repository. The Arduino Board Manager that Windows and Mac Users can use does a poor job when setting the appropriate permissions in the broad array of Linux environments. To install the ESP32 core:<br>

<ul>
  <li>go to  <a href="https://github.com/espressif/arduino-esp32">the git repository website here</a></li>
  <li>Scroll down until section <code>Installation Instructions</code> and choose the <code>Using Arduino IDE with the development repository</code> and <code>Instructions for Debian/Ubuntu Linux</code>.</li> 
  <li>copy paste the script and run it on your terminal. Install everything using <code>Python2,</code> not <code>Python3!</code></li> 
	<li>Pay close attention to what the output of the script says. If there is an error or some text about <code>unicode not existing</code> you need to change the word <code>python3 to python2.7</code> in that command string.</li> 
	 <li>Close your Arduino IDE and reopen it.</li>
  <li>Now check under <code>Tools>Board</code> if you can select the <code>DOIT ESP32 DEVKIT V1</code>. If you see it, you can move on.</li>
</ul>


<h3 id="3">(3) Install USB Cable Driver</h3>

Finally, you still need to install the USB cable driver.<br><br>

<b>Windows Users: </b> The <a href="https://www.arduino.cc/en/guide/windows">Arduino Installer</a> should install the USB Driver automatically. But in case it doesn't work, download the <a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers">USB cable driver from here.</a> Windows 10 users should use CP210x Universival Windows Driver, and Windows 8.1,8 and 7 users can use CP210x Windows Driver.  <code>Unzip</code> the folder, run <code>Installer_x64.exe</code> if 64 bit or <code>Installer_x86.exe</code> if 32 bit. If you get bugs, please let us know. <br><br>

<b>MacOS Users:</b> Download the <a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers"><code>CP210x VCP Mac OSX Driver</code> from here.</a> After installing, go to <code>System Preferences > Security</code> and click on the message about <code>enabling Silicon Labs Drivers</code> on your machine and confirm that you are ok with this. Also if you see a message that says <code>Some system software was blocked from loading</code> open it and confirm that you are ok loading the software.<br><br>

<b>*Nix Users:</b> There are two versions of the USB cable driver for *Nix users: <a href="https://iesc.io/608/_static/S20/lab01a/Linux_3.x.x_4.x.x_VCP_Driver_Source.zip"><code>Linux_3.x.x_4.x.x_VCP_Driver_Source.zip</code></a> and <a href="https://iesc.io/608/_static/S20/lab01a/Linux_2.6.x_VCP_Driver_Source.zip"><code>Linux_2.6.x_VCP_Driver_Source.zip</code></a>. We recommend trying the version 3/4 first.<br><br>

<b>Testing if the USB driver works (all OS):</b> Let's check if the USB cable driver was installed correctly. Look at the entries in the Arduino menu <code>Tools>port</code> *before* plugging in your ESP with the USB cable. You should see either none or one entry listed. Take note of what is there. Now plug in your ESP microcontroller and take another look at <code>Tools>port</code>. You should hopefully see one more entry. On <code>Windows</code> this will often be something like <code>COM3.</code> On <code>Mac</code> and <code>*Nix</code> it will be <code>USB_to_UART....</code> If you see this, you can move on.<br><br>

<h3 id="4">(4) Upload Test Program to ESP32</h3>

Once you have the <code>ESP32 Core selected</code> under <code>Tools->Board</code> and USB port selected under <code>Tools->Port</code>, the last step is to check if you can upload and run a program on your microcontroller.<br><br>

<pre>
<code>
// Arduino Test Code - Print "6.810 Engineering Interactive Electronics" on Serial Monitor <br>
void setup() { <br>
	Serial.begin(9600); <br>
	}
void loop() {  <br>
	// Print 6.810 Engineering Interactive Electronics to see it on the Serial Monitor <br>
	Serial.println("6.810 Engineering Interactive Electronics");
}
</code>
</pre>

<b>Print to the Serial Monitor:</b> Load the code given above into the Arduino Editor. Hit the <code>Upload</code> button, to send the program to your microcontroller. Now open the Serial Monitor on your Arduino Editor, by going to <code>Tools -> Serial Monitor</code>. <br> <br>

<img src="images/esp-setup/serial-monitor.png" width="650px"><br><br>

On opening the Serial Monitor, you should be able to see <code>6.810 Engineering Interactive Electronics</code> being printed repeatedly on the screen. This means that your program was successfully uploaded and run on the microcontroller. <br>

<!-- <b>Open Blink Program:</b> Load the <code>Blink</code> example program from <code>File->Examples->01.Basics->Blink</code>. If you can't find it in the Arduino IDE, <a href="https://www.arduino.cc/en/tutorial/blink">you can download it here</a>. Hit the <code>compile button</code> and then the <code>upload button</code> to send the program to your microcontroller. You should see the built-in LED on the ESP32 blink. Once you have this, you are ready to go back to Lab2 and continue.<br><br> -->

<!-- <img src="images/esp-setup/esp-setup-Blink.png" width="650px"><br><br> --> <br>

<b>Timed Out Error:</b> If you are having trouble uploading code to the ESP32, even with the corrected port selected. And you are seeing some error message like following <code>Failed to Connect to ESP</code>, hold down the <code>BOOT/FLASH</code> button on your ESP32 board (the button on the bottom right) while re-uploading the program at the same time. If you are still having trouble, let the teaching team know.<br><br>

<img src="images/esp-setup/timed-out-waiting-for-packet-header.png" width="650px"><br><br>
<img src="images/esp-setup/boot-flash-button.png" width="200px"><br><br>

<b>*Nix Users:</b> On your OS, it can happen that you don't have write permission on the USP port, i.e. you will not be able to upload code to your ESP32. This can be fixed temporarily after the ESP has been plugged in by typing into the command line: <code>sudo chmod 666</code> on the port your ESP32 shows up. On our Ubuntu box, it was either <code>/dev/ttyUSB1</code> or <code>/dev/ttyUSB0)</code>. This, however, is only a temporary fix, and will need to give yourself write permission to the USB port every time you plug in the device. A long term solution is to add yourself to the <code>dialout</code> group. Do this by running the following command <code>sudo usermod -a -G dialout YOUR_USERNAME_HERE</code> where you replace the username with your own. Once this is done, you will need to restart your computer for this change to take permanent affect.<br>


<br><br><br><br><br><br><br><br><br><br><br><br>

      </section>
      
      <aside class="col-md-4 pull-left">

                 <br /> <br /> <br /> <br /><br>

                  <h4 class="medium.headline" style="padding-bottom:10px;"><a href="lab-series-inkjet-printed-card.html"><b>Lab Series: Inkjet Printed Music Card</b></a><br></h4>

<ul>
    <li><a href="lab1-circuit-design-for-inkjet-printing.html">Lab 1: Circuit Drawings for Conductive Inkjet Printing</a></li>
    <li><a href="lab2-sensing-touch-button.html">Lab 2: Sensing Touch from Inkjet Printed Circuit</a></li>
    <li><a href="lab3-sending-touch-data-to-processing.html">Lab 3: Sending Touch Data to Processing</a></li>
    <li><a href="lab4-touch-slider-extension.html">Lab 4: Sensing Input from a Touch Slider</a></li>
</ul><br>


<iframe width="280" height="158" src="https://www.youtube.com/embed/R7qxT6_8TE4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br><br>

In this lab series, you will create an interactive music card. Underneath the visual design, the music card has an inkjet printed circuit with touch buttons and a slider that allow the user to play songs and control the volume. The card is connected to a microcontroller for analyzing user input and then sends the signals to a program called Processing for visualizing user input on screen.<br><br>


<h4 class="medium.headline" style="margin-bottom:0px;">Use our design or make your own</h4><br>

You have the choice to either use our template design files or to make your own design. That means either using our card design (three notes + piano keyboard) or to make your own card design. If you are a beginner in electronics and fabrication, we recommend you go with the default design since it is the safest path to success. However, if you are a designer at heart and you have some prior knowledge in electronics and making, it may be more interesting for you to make your own. If you decide to make your own, please make sure you read ahead what's coming in lab 2/3/4. There is also the risk that your own design will have its own bugs that we are less knowledgable about. Below you see a custom design from 6.810 student Diego Pinochet from last year that  features a circular slider rather than a straight one and additinal input buttons for extra functionality.<br><br>

<iframe width="280" height="158" src="https://www.youtube.com/embed/ky_5ARiG4so" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br><br>


          
      </aside>
      
    </div>
  </div>
  </div>
</section>

<div class="container">
	<div class="row">
		<div class="col-md-12 footer" style="text-align: center;">
			<span class="copyright">
			Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by 
			<a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
			moji
			</a>]. 
			All Rights Reserved.
			
			<a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
			</a>
			<a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
			</a>
			<a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
			</a>
			</span>
		</div>
	</div>
</div>

<!-- Bootstrap --> 
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script> 

</body>
</html>
