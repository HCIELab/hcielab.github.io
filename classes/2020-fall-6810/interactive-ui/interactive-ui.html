<!DOCTYPE html>
<html>
<head>
	<title>HCI Engineering Group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- CSAIL ICON -->
	<link rel="CSAIL" href="../../../images/icon/csail.ico" type="image/x-icon" />

	<!-- Bootstrap -->
	<link href="../../../css/bootstrap.css" rel="stylesheet">
	<link href="../../../css/custom-style.css" rel="stylesheet">

	<!-- jQuery -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">

	<!-- Google Analytic -->
	<script type="text/javascript" src="../../js/analytics.js"></script>

	<style>
	.etech-sch-col1 {width:60px; border: 1px solid black;padding:10px;}
	.etech-sch-col2 {width:120px; border: 1px solid black;padding:10px;}
	.etech-sch-col3 {width:450px; border: 1px solid black;padding:10px;}
	.etech-sch-col4 {width:70px; border: 1px solid black;padding:10px;}
  .etech-sch-col5 {width:70px; border: 1px solid black;padding:10px;}
  /*.etech-sch-col6 {width:170px; border: 1px solid black;padding:10px;}*/
  ul {
    padding:0px;padding-left:10px;margin:0px;
  }
	</style>
</head>

<body>
<header class="main_header">
	<!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
	<div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
</br></br></br></br>
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2020)</a><br></h>
        <h2 class="headline">User Interfaces Made with Printed Electronics</h2>
      
          <hr>

In the next weeks, we are going to build a range of different physical user interfaces. Below, you see the basic pipeline we will cover before going into more advanced examples. <br><br>

The pipeline consists of three steps:<br>

<ul>
  <li>Fabricating the Sliders, Dials, and Multi-touch Pad (Printed Electronics)</li>
  <li>Wiring up the Electronics and Performing Signal Processing on the Inputs from the User (Arduino)</li>
  <li>Displaying the Result in a graphical user interface on screen (Processing)</li>
</ul>
<br>

We will cover each of these parts in a seperate tutorial, starting with Processing today.<br>

<img src="images/pipeline.png" width="750px"><br><br>



 <h2 class="headline">Part 1: Creating the On-Screen UI with Processing</h2>

We will use graphical output generated by Processing a lot to help with debugging our user interfaces. <br>
Today, we will show you how to create some graphical output with Processing and next week we will extend this work an interface Processing with Arduino to actually receive some signals from our fabricated user interface. <br><br>

At the end of today, we want to have something that looks like this and that we can use in future weeks to visualize what is happening on our physical fabricated user interface:</br><br>

<img src="images/result.gif" width="700px">

</br></br>


 <h3 class="headline">Install Processing</h3>

You can download Processing for Windows, Mac, Linux here: <a href="https://processing.org/download/">https://processing.org/</a>.<br>
Once you downloaded it, you should see an IDE similar to the one Arduino uses.

<br><br>

<img src="images/processing-ui.png" width="350px"><br><br>

 <h3 class="headline">Code Structure: setup() and draw()</h3>

Similar to Arduino, Processing works with two functions:<br><br>

<b>setup():</b> is only run once at the beginning<br>
<b>draw():</b> is run repeatedly similar to Arduino's loop() function<br><br>

While the simple examples below do not require you to have this structure in place (i.e. you can simple type the code into the empty window, it is good practice to put the code for redrawing the window into draw() and the code that is only required once into setup()).<br><br>


 <h3 class="headline">Create Touch Button in Processing</h3>

Processing allows us to quickly create user interfaces on screen.<br><br>


 <h5>Creating Geometry</h5>

Type the following into the Processing window to create a simple rectangle that can serve as a touch button later:<br>
<code>rect(40, 40, 30, 30); // rect(upperleft_x, upperleft_y, width, height)</code><br><br>

<img src="images/touch-button1.png" width="100px"><br><br>

Look at the Processing Reference here and make your rectangle have round corners like shown in the image below:<br>
<ul><li><a href="https://processing.org/reference/rect_.html">Processing Reference for rect()</a></li></ul><br>

<img src="images/touch-button2.png" width="100px"><br><br>

If you need it later, you can find the full reference here: <br>
<ul><li><a href="https://processing.org/reference/">Complete Processing Reference</a>.</li></ul><br>

 <h5>Changing Color of Button</h5>

Next, imagine we want to change this buttons color based on if it is touched or untouched.<br>

To change the color of an object, you can use the fill() function.<br><br>

<code>
fill(204, 102, 0); // fill(R, G, B), 0-255<br>
rect(40, 40, 30, 30,7); // rect(upperleft_x, upperleft_y, width, height)</code><br><br>
<ul><li><a href="https://processing.org/reference/fill_.html">Processing Reference for fill()</a></li></ul><br>

<img src="images/touch-button-color.png" width="100px"><br><br>

 <h5>Changing Color Based on State</h5>

Do change a color based on state (e.g., pressed/not pressed), you can use a simple if/else statement.<br><br>

<code>
String state = "pressed";<br>
if (state == "pressed") {<br>
fill(0, 0, 0);<br>
} else if (state == "unpressed") {<br>
fill(255, 255, 255);<br>
} else {<br>
 fill(255, 0, 0);<br>
}<br>
rect(40, 40, 30, 30,7);
</code><br><br>

In the example above, when the String is pressed or unpressed, the button is either white or black, if some wrong input is given (i.e., any String other than those), the button is red to signal something went wrong.<br><br>

<img src="images/touch-button-pressed.png" width="100px">
<img src="images/touch-button-unpressed.png" width="100px">
<img src="images/touch-button-wrong.png" width="100px"><br><br>

<h5>Changing Color Based When Mouse Pressed</h5>

Rather than using a fixed state, you can also use mouse input to change the appearance of a button.<br>
For this one, we finally need the setup() and draw() functions, since the mouseInput needs to be read continously and the button color needs to be redrawn every frame based on the input from the mouse.<br>

<code>
void setup() { <br>
  size(480, 120);<br>
}<br><br>

void draw() {<br><br>

  if (mousePressed) {<br>
    fill(0);<br>
  } else {<br>
    fill(255);<br>
  }<br>
  rect(40, 40, 30, 30, 7);<br>
}
</code>

<br><br>

Executing this code should give you a button that changes from black to white depending on if the mouse is pressed or not.<br><br>

<h5>Changing Color When the Button is Clicked</h5>

As a final example, we want to only change the button color, when the button is clicked.<br>
If the user clicks somewhere else on the screen, the button should keep its color.<br>
We can do this by comparing if the mouse coordinates are within the buttons area.<br><br>

<code>

int rectX = 40;<br>
int rectY = 40;<br>
int rectWidth = 30;<br>
int rectHeight = 30;<br><br>

void setup() { <br>
  size(480, 120);<br>
}<br><br>

void draw() {<br><br>

if(mousePressed) {<br>
  if (mouseX > rectX && mouseX < rectX+rectWidth) {<br>
    if (mouseY > rectY && mouseY < rectY+rectHeight) {<br>
      fill(0);<br>
    }<br>
} else {<br>
    fill(255);<br>
  }<br>
  rect(rectX, rectY, rectWidth, rectHeight, 7);<br>
}
</code>

<h5>Wrapping Everything Up Into a Class</h5>

If we need more than one touch button, it becomes handy to make it its own class, so we can simply make multiple instances of this class rather than creating a huge variable mess.<br><br>

You can read more about Objects and Classes in Processing here: <br>
<ul><li><a href="https://processing.org/tutorials/objects/">Objects/Classes Processing Reference</a>.</li></ul><br>

<b>Your Task:</b> 

<ul>
<li>Convert the functionality we have into a touch button class called <i>TouchButton</i>.</li> 
<li>We should be able to create a new touch button in Processings setup() function by first creating a variable, e.g., <code>TouchButton touchButton1;</code></li>
<li>and then creating the object with the constructor, for instance: <code>touchButton1 = new TouchButton(30,30,40,40, color(255,255,255), color(0,0,0));</code> whereas the attributes are (x-position, y-position, width, height, unpressed color, pressed color)</li>
<li>Processings draw() function should then include a call to a TouchButton class function <code>touchButton1.changeColorIfPressed()</code> to update the color if the mouse is pressed.</li>
<li>if you want you can also put your TouchButton class into a separate file like shown below, simply create a new tab, save the class there and then call it from the main file</li>
</ul><br>

Check if your code works by creating a range of touch buttons on the screen of different sizes and with different positions and press/unpress colors.<br><br>


<img src="images/touchbutton-class.png" width="600px"><br><br>

<img src="images/separate-file-for-class.png" width="350px"><img src="images/separate-file-for-class2.png" width="300px"><br><br>



<!-- Below, we show how we converted the previous code into a TouchButton class.<br>
This now allows us to create any number of new touch buttons with the desired color-change on mouse click behavior by simply creating a new object with <code>TouchButton touchButton1;</code> and then calling the constructor with <code>touchButton1 = new TouchButton(30,30,40,40, color(255,255,255), color(0,0,0));</code> whereas the individual variables indicate the touch button position, size, and color in the pressed and unpressed states.<br><br>  

<code>
TouchButton touchButton1;<br>
TouchButton touchButton2;<br><br>

void setup() { <br>
  size(480, 120);<br>
  touchButton1 = new TouchButton(30,30,40,40, color(255,255,255), color(0,0,0));<br>
  touchButton2 = new TouchButton(120,20,70,70, color(150,50,40), color(23,253,70));<br>
}<br><br>

void draw() {<br>
  touchButton1.changeColor(touchButton1.isButtonPressed());<br>
  touchButton2.changeColor(touchButton2.isButtonPressed());<br>
}<br><br>


class TouchButton {<br><br>
  
  int posX;<br>
  int posY;<br>
  int bwidth;<br>
  int bheight;<br>
  color pressedColor; <br>
  color unpressedColor;<br><br>
  
  TouchButton(int tempPosX, int tempPosY, int tempWidth, int tempHeight, color tempUnpressedColor, color tempPressedColor) {<br>
    posX = tempPosX;<br>
    posY = tempPosY;<br>
    bwidth = tempWidth;<br>
    bheight = tempHeight;<br>
    unpressedColor = tempUnpressedColor;<br>
    pressedColor = tempPressedColor;<br><br>
    
    fill(unpressedColor);<br>
    rect(posX,posY,bwidth,bheight);<br>
  }<br><br>
  
  boolean isButtonPressed() {<br>
    if(mousePressed) {<br>
      if (mouseX > posX && mouseX < posX+bwidth) {<br>
        if (mouseY > posY && mouseY < posY+bheight) {<br>
         return true;<br>
        }<br>
      }<br>
    }<br>
    return false;<br>
  }<br><br>
  
  void changeColor(boolean buttonPressed) {<br>
   if (buttonPressed) {<br>
      fill(pressedColor); <br>
   }<br>
   else if (!buttonPressed) {<br>
     fill(unpressedColor);<br> 
   }<br>
   rect(posX,posY,bwidth,bheight);<br>
  }<br>
}
</code>

 -->










<h3 class="headline">Understanding Touch-Buttons, Sliders, Dials, Multi-Touch Pad</h3>

In the task for this week, we will ask you to extend the user interface we described above to display touch buttons, sliders, dials, and a multi-touch pad. Before you start coding, let's look at each element briefly. <br><br>

<h5>Touch-Button</h5>

A touch button consists of one area shape with an outgoing wire.<br>
For today, we assume a touch button is rectangular, but as you can see below it can have any shape.<br>

<img src="images/touch-button-decorative1.png" width="300px"><br><br>

<h5>Slider (aka multiple Touch-Buttons linearly arranged)</h5>

A slider works exactly like a touch button, just that it has a different sensing line for each slider segment.<br><br>

<b>Number of Segments:</b> The number of slider segments determines its resolution, i.e. the more segment the slider has, the more discrete values it can sense. For instance, if you need a slider to select an audio volume in a range from 0-100 and you only have three slider segments, you may only get three values from the user input and thus you may decide to map them to 0, 50, 100 volume. However, if you had 10 slider segments, you can have more fine grained values, e.g. volume of 0, 10, 20, 30... etc.<br><br>

<b>Discrete vs. Continous Sliders:</b> Imagine your finger sliding over the slider below with your finger being exactly the size of one slider segment. In the discrete slider, you would only touch one segment at a time. However, in the continous example, as your finger slides to the right, you touch two elements simultaenously since they slightly overlap. This allows the slider to have a higher resolution with fewer segments since we can use some smart processing to interpolate the interaction. 

<img src="images/slider-designs1.png" width="250px"><br><br>

Here are a few examples of continous sliders:<br>

<img src="images/slider-designs3.png" width="250px"> <img src="images/slider-designs2.png" width="250px"><br><br>


<h5>Dials (aka multiple Touch-Buttons circularly arranged)</h5>

Everything we just say applies to dials as well, i.e. number of segments determines resolution and while the example below only shows a discrete dial, you can also create continous dials by using the same interleaving approach as described for the slider.<br><br>

<img src="images/dial.png" width="250px"><br><br>

<h5>Multi-Touch Pad</h5>

The multi-touch pad works a little different. As you can see in the images below, there is only one line per row, i.e. multiple segments are connected together.<br>

<img src="images/multitouch-example1.png" width="380px">
<img src="images/multitouch-example2.png" width="300px"><br>

As you can see below, there are two sets of lines, one printed on one side of the sheet and the other printed on the other side of the sheet. The sheet is working as an insulator between both lines. One set of lines is always 'on', i.e. transmitting, while the other set of lines is off and listening to any changes to the signal that is transmitted by the other lines. A change, for instance, happens, when the user touches one of the lines. The change in the transmitted signal that the receiving lines get then indicates where on the line the user touched. We will tell you more about it once we reach the electronics parts of this lab.<br>

<img src="images/multitouch-principle.png" width="700px"><br><br>


<h3 class="headline">Your Task</h3>

Your task for the remaining time today and as homework is to prepare a user interface in Processing that mirrors the physical user interface elements that we will build next week. <br> 
You can see an image of what you need to build below.<br><br>

Your user interface should display on the screen:<br>
<ul>
  <li>a touch button</li>
  <li>a slider</li>
  <li>a multi-touch pad</li>
</ul> <br>

 Your user interface should also be able to scale the slider and multi-touch pad to have different number of segments.<br>
 Thus, when the designer needs a slider of resolution 5, the slider should have 5 segments with individual states.<br><br>

Show that you can change the color of each segment by clicking on it. <br> 

When you are done upload your code to Gradebook and attach a short screencast video showing your UI.<br> 

<h5>Implementation</h5>
<ul>
  <li>You already have the TouchButton class.</li>  
  <li>Remember, a slider is just a list of TouchButtons, so when you create the class TouchSlider it makes sense to define it as an ArrayList of TouchButtons, read more about ArrayLists here: <a href="https://processing.org/reference/ArrayList.html">https://processing.org/reference/ArrayList.html</a></li>
  <li>You can think of a multitouch pad as just a list of TouchSliders, so when you create the class MultiTouchPad it makes sense to define is as an ArrayList of TouchSliders.</li>
  <li>Label each Element with its Name, you can find more info on Displaying Text here <a href="https://processing.org/tutorials/text/">https://processing.org/tutorials/text/</a> and more info on Typography here <a href="https://processing.org/tutorials/typography/">https://processing.org/tutorials/typography/</a></li>
  <li>(may be too difficult) For the dial, you may want to use the same approach as for the TouchSlider, i.e. use an ArrayList of Touch Buttons, but on top of that you also need more advanced drawing capabilities, we recommend you use arc to define the dial segments <a href="https://processing.org/tutorials/curves/">https://processing.org/tutorials/curves/</a></li>
</ul>

<br><br>

<img src="images/result.gif" width="700px">

<h5>Extra: Dial</h5>

This code allows you to import an svg file directly into Processing.<br><br>

If you create your SVG file in Illustrator, make sure you change the following export option: When you save the svg 1) choose "More Options" in the SVG Options dialog, and then 2) select the "Style Attributes" in the drop CSS Properties drop down to make it compatible with Processing. <br><br>

<code>PShape bot;<br><br>

void setup() {<br>
  size(1040, 860);<br>
  // The file "bot1.svg" must be in the data folder<br>
  // of the current sketch to load successfully<br>
  bot = loadShape("star.svg");<br>
} <br><br>

void draw(){<br>
  background(102);<br>
  shape(bot, 110, 90, 100, 100);  // Draw at coordinate (110, 90) at size 100 x 100<br>
  shape(bot, 280, 40);            // Draw at coordinate (280, 40) at the default size<br>
}
</code>
<br><br>

<img src="images/readsvg1.png" width="250px">
<img src="images/readsvg2.png" width="500px">

<h5>Collision Detection</h5>

All possible ways are described here <a href="http://jeffreythompson.org/collision-detection/table_of_contents.php">http://jeffreythompson.org/collision-detection/table_of_contents.php</a>.<br>
We provide you with a code file that handles for you the point (mouse cursor) and polygon (shape) detection.<br>
You can read more about it here <a href="http://jeffreythompson.org/collision-detection/poly-point.php">http://jeffreythompson.org/collision-detection/poly-point.php</a><br><br>








<br>

        <br />
        <br />
        <br />
      </section>

      <aside class="col-md-4 pull-left">
         <br /> <br /> <br /> <br />
<!-- 				 <h4>Pset Steps</h4><br>
				 <ul>
		 			<li><a href="#pset1">pset1 (due Sept. 21, 11.59pm): laser cut and bend the acrylic base</a><br /></li>
		 			<li><a href="#pset2">pset2 (due Oct. 5, 1pm): insert LEDs, add USB connecting and solder everything</a><br /></li>
		 			<li><a href="#pset3">pset3 (due Oct. 19, 1pm): write touch recognition so that you can determine (x,y) location of each finger</a><br /></li>
		 			<li><a href="#pset4">pset4 (due Oct. 26, 1pm): add an application of your choice</a><br /></li>
				</ul>
				<br /> <br /> <br /> <br />
        <img src="../2018-fall-6810/images/multi-touch-pad/iap1.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap2.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad//iap3.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap4.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap5.jpg" width="220px">
 -->



        <!-- Publication -->

        <br><br><br><br><br>

        <!-- Publication -->

<!-- <h4>Side Bar</h4><br>

    <ul>
      <li>Prof. Stefanie Mueller (Instructor)</li>
      <li>Lotta-Gili Blumberg (TA)</li>
      <li>Xin Wen (UTA)</li>
      <li>Loren Maggiore (LA)</li>
      <li>Mark Chounlakone (LA)</li>
    </ul>
 -->
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

      </aside>

    </div>
  </div>
  </div>
</section>

<div class="container">
	<div class="row">
		<div class="col-md-12 footer" style="text-align: center;">
			<span class="copyright">
			Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by
			<a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
			moji
			</a>].
			All Rights Reserved.

			<a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
			</a>
			<a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
			</a>
			<a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
			</a>
			</span>
		</div>
	</div>
</div>

<!-- Bootstrap -->
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script>

</body>
</html>
