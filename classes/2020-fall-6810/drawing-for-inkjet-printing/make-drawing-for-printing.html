<!DOCTYPE html>
<html>
<head>
	<title>HCI Engineering Group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- CSAIL ICON -->
	<link rel="CSAIL" href="../../../images/icon/csail.ico" type="image/x-icon" />

	<!-- Bootstrap -->
	<link href="../../../css/bootstrap.css" rel="stylesheet">
	<link href="../../../css/custom-style.css" rel="stylesheet">

	<!-- jQuery -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">

	<!-- Google Analytic -->
	<script type="text/javascript" src="../../js/analytics.js"></script>

	<style>
	.etech-sch-col1 {width:60px; border: 1px solid black;padding:10px;}
	.etech-sch-col2 {width:120px; border: 1px solid black;padding:10px;}
	.etech-sch-col3 {width:450px; border: 1px solid black;padding:10px;}
	.etech-sch-col4 {width:70px; border: 1px solid black;padding:10px;}
  .etech-sch-col5 {width:70px; border: 1px solid black;padding:10px;}
  /*.etech-sch-col6 {width:170px; border: 1px solid black;padding:10px;}*/
  ul {
    padding:0px;padding-left:10px;margin:0px;
  }
	</style>
</head>

<body>
<header class="main_header">
	<!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
	<div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
</br></br></br></br>
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2020)</a><br></h>
        <h2 class="headline">Conductive Inkjet Printing and Processing</h2>

  <img src="images/silver-printing.jpg" width="317px" />
          <br>


<h2 class="headline">Goal for Lab 1/2/3: Interactive Music Card</h2>

In the next labs, we are going to create an interactive music card with touch buttons, sliders, and other elements to control your favorite music from Spotify. We will first create a 2D design that contains the circuit and the touch buttons, sliders, and displays, you would like to apply to the music card and then we will print out your 2D design with the conductive inkjet printer and you will receive it in the mail hopefully by next week.<br><br>

<img src="images/music-card1.png" width="200px" />
<img src="images/music-card2.png" width="200px" />
<img src="images/music-card3.png" width="200px" />

<h2 class="headline">Your Task for Today</h2>

Today, we will make the circuit design of your card and print it out with conductive inkjet printing to make sure you have your design program setup correctly. Once you have your circuit design working, we will setup the touch buttons in Processing so when you give physical input you can also see it on the screen.</br><br>

<hr>

<h2 class="headline">Step 1: Create Circuit Design with Touch Buttons</h2>

<h3>Specifications for Conductive Inkjet Printing</h3><br>

<b>Thickness of Wires:</b> Your wires should be at least 1mm thick. Make sure to check this in your drawing program. <br><br>

<b>Connector Pads for Wires:</b> The end of your wire that connects to the microcontroller, needs a connector pad that is large enough to connect to conductive tape. The connector pad should be 1cm x 1cm to be on the safe side.<br><br>

<h3>What Input Elements can you use?</h3><br>

For starters, we your card is going to include only touch buttons and a simple area display.<br>
For the problem set later, we will also ask you to create a slider or dial.<br><br>

<h4>Touch Buttons</h4><br>

Touch-buttons consist of one shape + one wire that connects to the microcontroller.<br>
We can sense a user's touch using a principle called <b>capacitive touch sensing</b>, which requires only one electrode.<br><br>

<img src="images/touch-button-decorative1.png" width="300px"><br>

<br><br>

<h4>Touch Sliders (aka multiple touch buttons linearly arranged)</h4><br>

Touch-sliders consist of multiple touch buttons linearly arranged, i.e. several shapes and each shape has its own wire that connects to the micro-controller.<br><br>

<b>Discrete vs. Continous Sliders:</b><br>

In the discrete slider design, the finger tends to be only over one of the slider segments. <br>
In the continous design, the finger tends to touch two adjacent slider segements. <br><br>

<img src="images/slider-designs1.png" width="300px"><br>
From the paper <a href="https://dl.acm.org/doi/10.1145/2971763.2971777">DuoSkin (ISWC 2016)</a><br><br>

<b>Continous Sliders (Different Aesthetic Design Options):</b><br>
<img src="images/slider-designs3.png" width="300px"> <img src="images/slider-designs2.png" width="300px"><br>
From the paper <a href="https://dl.acm.org/doi/10.1145/2971763.2971777">DuoSkin (ISWC 2016)</a><br><br>

<h4>Dials (aka multiple touch buttons circularly arranged)</h4><br>

Touch-dials consist of multiple touch buttons circularly arranged, i.e. several shapes and each shape has its own wire that connects to the micro-controller.<br><br>

<img src="images/dial.png" width="300px"><br>
Example from the paper <a href="https://dl.acm.org/doi/10.1145/2971763.2971777">DuoSkin (ISWC 2016)</a><br><br>

<h4>Electroluminescent Area Display</h4><br>

In your package next week, you will also received a custom printed display.<br>
This display is called electroluminescent display and we screen printed it from four different materials printed into four layers.<br>
<br>

<b>Making Custom Shaped Displays:</b> The display you will get is a simple area display that can turn on/off but does not have pixels. Note that although we will send you a square display, you can create your own shape either in non-destructive way (allows for reuse) or destructive way. The non-destructive way requires you to mask the display, i.e. cutting a shape from e.g. from cardboard and attaching it to the display to cover the remaining area so that no light comes through. The destructive way includes cutting out the shape (making sure you are not cutting into the wire connection to the microcontroller and also make sure you unplugged the display before cutting since most scissors are conductive on their blades).<br><br>

<img src="images/printscreen2.jpg" width="145px">
<img src="images/printscreen3.jpg" width="345px"><br>
Examples of masked and cut EL displays.<br><br>

<h3>Can you print color and conductive elements together?</h3><br>

Since the inkjet printer has 4 cartridges (one for each C, M, Y, K) and we are only using the K Cartridge for silver, you can still print color at the same time as the silver. <br><br>

However, we cannot print them at the same time (same pass) but have to use two seperate passes, i.e. we first print all silver, take the paper out, reinsert, and then print the color. The reason for this is that if we overlay color over the silver in the drawing, the printer will only use the top most layer and ignore the layer underneath.<br><br>

So to print color and silver you need to: <br>
<ul>
	<li>make one design file to see how it looks together</li>
	<li>then split the design file into two: one for the silver, one for the color</li>
	<li>print the silver design file first, then reinsert the paper, then print the color file</li>
</ul><br>

<img src="images/touch-button-decorative2.png" width="300px"><br>
Silver touch button in the middle is overprinted with white in a second layer. In addition, the red flame is added as a decorative element (it has no input functionality).<br><br>

<h4>Making your Circuit Design</h4><br>

Open your drawing program and set the document color mode to CMYK.</br>
Draw a design that has at least three different touch buttons, one for a different song each.<br>
It should also include the display that will blink to the beat of the long.<br>
Make sure you use the correct wire thickness (at least 1mm) and connector pad size (at least 1cm x 1cm).<br>
We recommend all your connector pads route to a common location where you will attach the microcontroller later.<br>
Make sure all the silver you draw has the line/area color 'black (CMYK: 0,0,0,255)'.<br>
The touch button should also be surrounded by a decorative color design to show that you can print color and silver together. <br><br>

The shape of the touch buttons and display is completely up to you -- be creative and please don't just make a rectangle. Also keep in mind that the wire does not have to be a straight line but can be any decorative pattern you'd like to use (e.g. a wavy line).  <br><br>

Please limit the size of the touch button to something that is roughly the size of a finger tip (an area around 2cm x 2cm) and the wire length to no more than 10cm for now. The display that you will get shipped is 5x5cm in area and you can cut it into any shape you like (not cutting into the wires).<br><br>

Once you have your design, add it to <a href="https://drive.google.com/drive/folders/1MageOgstlli5Ze2GGVchak4iKyDtWwZK?usp=sharing">your google drive folder.</a><br><br>

The teaching team will print it out for you right away and will test if it is functional.<br><br>

<h3>Printing your Design </h3><br>

To print your design, we use the inkjet printer XX (add link).<br>
For color printing, we bought some regular CMYK cartridges from here (add link).<br>
For silver printing, we bought empty cartridges from here (add link) and seperately bought silver ink from here (add link).<br>
We then filled the silver ink with a syringe into the empty cartridge as you can see below in the photo.<br>
Note that if the silver is too long in the cartridge, it will eventually dry out and not print anymore.<br>
Once the silver is loaded into the empty cartridge, we add it as the 'K' cartridge to our printer.<br>
We then only have to open your drawing file and print it (and hope that you assigned the wire traces as true black (K) in your drawing so that the right cartridge will be used.<br><br>

<img src="images/silver-ink.jpg" width="317px" />
<img src="images/silver-inkjet-printing.png" width="317px" />

<h3>Using a Multi-Meter to Test if your Touch Button Works</h3><br>

Digital multimeters (DMM) are an indispensable tool that you can use to diagnose circuits, i.e. see if they work.<br>
To test if the conductive inkjet printing was successful, i.e. the silver was deposited over the entire area and there are no gaps, we use the multimeter to check the resistance of the trace.<br><br> 

If the resistance is high, the print didn't work.<br>
If the resistance is low, everything went fine and the trace is nicely connected.<br><br> 

The resistance of your touch button is not only affected by the print quality, but also by the length and width of your wire (crosssection of the wire), a wider trace allows the current to flow better and thus leads to higher conductivity.<br> <br> 

To use the multi-meter, we set if to XX sensitivity and then hold the plus measurement point on the touch button and the minus on the connector pad.<br>
As a result, we will see the resistance in the display.<br>
Resistance below XX is great, above YY is not good. <br><br>   

While in this tutorial, we will measure it for you, your package contains a multimeter so you can check this at home by yourself in the future.<br><br>  

<img src="images/multimeter.jpg" width="300px">


<h2 class="headline">Step 2: Processing to Visualize Touch Button Input</h2>

Processing is a program that makes it easy to prototype user interfaces. Once you got your microcontroller in the mail, we will wire everything up and write code to send the touch button input directly to Processing, so that it can visualize if the button is pressed or not. Today, we are going to prepare the UI in Processing so you have everything ready when the rest comes in the mail.<br><br>

<div style="background:#04a47c;padding:10px;">Checkoff 1: The Teaching Team printed your Touch Sensor and it works</div>

</br>

 <h3 class="headline">Install Processing</h3>

You can download Processing for Windows, Mac, Linux here: <a href="https://processing.org/download/">https://processing.org/</a>.<br>
Once you downloaded it, you should see an IDE similar to the one Arduino uses.

<br><br>

<img src="images/processing-ui.png" width="350px"><br><br>

 <h3 class="headline">Code Structure: setup() and draw()</h3>

Similar to Arduino, Processing works with two functions:<br><br>

<b>setup():</b> is only run once at the beginning<br>
<b>draw():</b> is run repeatedly similar to Arduino's loop() function<br><br>

While the simple examples below do not require you to have this structure in place (i.e. you can simple type the code into the empty window, it is good practice to put the code for redrawing the window into draw() and the code that is only required once into setup()).<br><br>

 <h3 class="headline">Getting Started: Drawing a Shape and Mouse Input</h3>

If you haven't done it yet, please do the getting started tutorial to learn how to draw a shape and do mouse input:<br>
<a href="https://processing.org/tutorials/gettingstarted/">https://processing.org/tutorials/gettingstarted/</a><br><br>

<h3 class="headline">Loading in an Image of the Mug</h3>

First, display the image below as the background of your Processing application.<br><br>
Make sure your image file is inside your project folder (Documents -> Processing -> project folder) otherwise it cannot be loaded.<br><br>

To load an image, you can use the <a href="https://processing.org/reference/PImage.html">documentation for PImage</a>.<br><br>

<img src="images/load-image-card.png" width="200px"> <br><br>

 <h3 class="headline">Create Touch Button in Processing</h3>

Processing allows us to quickly create user interfaces on screen.<br><br>

 <h5>Creating Touch Button on Image</h5>

Next, we want to create a touch button and place it on the mug where our final touch button will be in the design.<br>
For simplicity, we will assume that you touch button is rectangular for now.<br>
We will show you later how to load the actual geometry of your button.<br><br>

Make a rectangle with round corners and in silver (gray) color like shown in the image below:<br>
<a href="https://processing.org/reference/rect_.html">Processing Reference for rect()</a><br>
<a href="https://processing.org/reference/fill_.html">Processing Reference for fill()</a><br><br>

<img src="images/processing-fill-color-rect-card.png" width="200px"><br><br>

If you need it later, you can find the full reference here: <br>
<ul><li><a href="https://processing.org/reference/">Complete Processing Reference</a>.</li></ul><br>

 <h5>Changing Color of Button if Button is Pressed</h5>

In the future, we will receive a signal from our Arduino that will either say 'touched' or 'not touched' and based on that we want to visualize in our UI that the button is pressed or not. Here, we are going to simulate this: When the mouse is over the touch button and the mouse is pressed, we want to color the button in green, otherwise the button should remain colored in gray/silver to show that it is inactive. In addition, we want to render a piece of text showing the button was pressed as shown below. <br><br>

To implement this you will need:
<ul>
  <li>if/else statement (works the same as in other programming languages)</li>
  <li>for mouse click, you may want to look at <a href="https://processing.org/reference/mousePressed_.html">Mouse Pressed Processing Reference</a></li>
  <li>for mouse click on the button: unfortunately processing does not have an intersect function, so you need to check if the mouse coordinates are within the X/Y bounds of the touch button</li>
  <li>for the text, you may want to look at <a href="https://processing.org/reference/PFont.html">Processing Reference for Pfont</a> and <a href="https://processing.org/tutorials/text/">text tutorial here</a></li>
</ul>
<br><br>

<img src="images/card-animated.gif" width="250px"><br><br>


<div style="background:#04a47c;padding:10px;">Checkoff 2: Show your completed push/unpush program.</div>


<h5>Importing Vector Graphics</h5>

Next, we will import your actual drawing to the canvas.<br>
For this, we prepared this .svg import class. <br><br>

To load your .svg file, make sure your image file is inside your project folder (Documents -> Processing -> project folder) otherwise it cannot be loaded.<br><br>

You can use the <a href="https://processing.org/reference/PShape.html">Processing PShape reference</a> to see how to load it.</br>
Position it where your former touch button was.</br></br>

If you create your SVG file in Illustrator, make sure you change the following export option: When you save the svg 1) choose "More Options" in the SVG Options dialog, and then 2) select the "Style Attributes" in the drop CSS Properties drop down to make it compatible with Processing. <br><br>

<img src="images/readsvg2.png" width="350px">

<h5>Checking for Mouse Input on a Vector Graphic of Arbitrary Shape</h5>

With a vector graphics, our simple boundary checking doesn't really work anymore, so we need something more sophisticated.<br>
For this, we implemented you the following collision detection class that you can use in your project.<br>

All possible ways are described here <a href="http://jeffreythompson.org/collision-detection/table_of_contents.php">http://jeffreythompson.org/collision-detection/table_of_contents.php</a>.<br>
We provide you with a code file that handles for you the point (mouse cursor) and polygon (shape) detection.<br>
You can read more about it here <a href="http://jeffreythompson.org/collision-detection/poly-point.php">http://jeffreythompson.org/collision-detection/poly-point.php</a><br><br>

<div style="background:#04a47c;padding:10px;">Checkoff 3: Show your vector graphics button.</div>


<h3>Processing Tutorials and Problem Set 1:</h3>

If you still have time left, we recommend you use it to check out some of the <a href="https://processing.org/tutorials/">additional Processing tutorials</a>.<br><br>

Alternatively, you can start with <a href="conductive-inkjet-design.html">Problem Set 1, which we released today.</a>



<!-- 
<b>Materials and Layerstack:</b> An EL display contains (1) phosphor, which can glow when current is applied. To make it glow, the phosphor has to be sandwiched by a bottom and top electrodide. The bottom electrode can be a conductive material, such as (2) our silver ink (alternatively copper can be used for even higher conductivity). The top electrode cannot be made from silver since you would otherwise not see the phosphor anymore! Thus, the top electrode is made from a transparent conductive material called (3) PEDOT:PSS. Finally, since the phosphor and the electrodes are all conductive, we cannot lay them all on top of each other since this would create a short circuit. Therefore, we need to add (4) a dielectric insulating layer between the bottom electrode and the phosphor (conceptually, the dielectric could also be between the phosphor and the top electrode, but again then you wouldn't see anything anymore since the dieletric is not transparent). <br><br>

You can buy the materials here: <br>
<ul>
	<li>copper ink (add link)</li>
	<li>PEDOT:PSS (add link)</li>
	<li>Phosphor (add link)</li>
	<li>Dieletric (add link)</li>
</ul>

<img src="images/el-materials.png" width="400px"><br>
<img src="images/el-layerstack.png" width="500px"><br><br>

<b>Size of each layer:</b> Note that the dieletric layer is a bit larger than the other layers. Since the dieletric layer prevents everything from short circuiting, it should be a bit larger to make sure all other layers are really seperated from each other and not touching. <br><br>

<img src="images/el-area-sizes.png" width="500px"><br><br>

<b>Fabrication:</b> While the silver ink and PEDOT:PSS can be inkjet printed, the phosphor and dieletric have unfortunately too large particules in their inks, which clogg printer nozzles. We there screen printed the display you got. Below, you can see images of how we did it.<br><br>

<img src="images/screen-printing.jpg" width="500px"><br><br>
 -->


<br>

        <br />
        <br />
        <br />
      </section>

      <aside class="col-md-4 pull-left">
         <br /> <br /> <br /> <br />
<!-- 				 <h4>Pset Steps</h4><br>
				 <ul>
		 			<li><a href="#pset1">pset1 (due Sept. 21, 11.59pm): laser cut and bend the acrylic base</a><br /></li>
		 			<li><a href="#pset2">pset2 (due Oct. 5, 1pm): insert LEDs, add USB connecting and solder everything</a><br /></li>
		 			<li><a href="#pset3">pset3 (due Oct. 19, 1pm): write touch recognition so that you can determine (x,y) location of each finger</a><br /></li>
		 			<li><a href="#pset4">pset4 (due Oct. 26, 1pm): add an application of your choice</a><br /></li>
				</ul>
				<br /> <br /> <br /> <br />
        <img src="../2018-fall-6810/images/multi-touch-pad/iap1.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap2.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad//iap3.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap4.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap5.jpg" width="220px">
 -->



        <!-- Publication -->

        <br><br><br><br><br>

        <!-- Publication -->

<!-- <h4>Side Bar</h4><br>

    <ul>
      <li>Prof. Stefanie Mueller (Instructor)</li>
      <li>Lotta-Gili Blumberg (TA)</li>
      <li>Xin Wen (UTA)</li>
      <li>Loren Maggiore (LA)</li>
      <li>Mark Chounlakone (LA)</li>
    </ul>
 -->
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

      </aside>

    </div>
  </div>
  </div>
</section>

<div class="container">
	<div class="row">
		<div class="col-md-12 footer" style="text-align: center;">
			<span class="copyright">
			Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by
			<a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
			moji
			</a>].
			All Rights Reserved.

			<a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
			</a>
			<a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
			</a>
			<a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
			</a>
			</span>
		</div>
	</div>
</div>

<!-- Bootstrap -->
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script>

</body>
</html>
