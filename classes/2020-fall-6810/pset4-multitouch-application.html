<!DOCTYPE html>
<html>
<head>
	<title>HCI Engineering Group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- CSAIL ICON -->
	<link rel="CSAIL" href="../../images/icon/csail.ico" type="image/x-icon" />

	<!-- Bootstrap -->
	<link href="../../css/bootstrap.css" rel="stylesheet">
	<link href="../../css/custom-style.css" rel="stylesheet">

	<!-- jQuery -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">

	<!-- Google Analytic -->
	<script type="text/javascript" src="../../js/analytics.js"></script>

	<style>
	.etech-sch-col1 {width:60px; border: 1px solid black;padding:10px;}
	.etech-sch-col2 {width:120px; border: 1px solid black;padding:10px;}
	.etech-sch-col3 {width:450px; border: 1px solid black;padding:10px;}
	.etech-sch-col4 {width:70px; border: 1px solid black;padding:10px;}
  .etech-sch-col5 {width:70px; border: 1px solid black;padding:10px;}
  /*.etech-sch-col6 {width:170px; border: 1px solid black;padding:10px;}*/
  ul {
    padding:0px;padding-left:10px;margin:0px;
  }
	</style>
</head>

<body>
<header class="main_header">
	<!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
	<div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
</br></br></br></br>
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2020)</a><br></h>
        <h2 class="headline">Problem Set Series: Multi-Touch Pad</h2>


<img src="images/pset2-overall.png" width="300px">
<img src="images/pset4/UI-recognizer-A.png" width="240px">
<img src="images/pset4/UI-3d-visualization-2-finger.png" width="200px"> <br>

          <hr>

<h2 class="headline">Problem Set 4 (due Friday, Nov. 6, 2020, 11.59pm)</h2>

Now that you have the Processing code that reads and visualizes sensing data, you will build on top of it and come up with some cool applications. To accomplish this, you will do the following two parts:<br>

<ul>
	<li>(1) Make the multi-touch pad a finger gesture recognizer</li>
	<li>(2) Visualize the touching data in 3D</li>
	<!-- <li>(3) An open-ended cool mini-application based on (1) and/or (2) (optional) </li> -->
</ul>

<h3>(1) Make the multi-touch pad a finger gesture recognizer</h3>
Let's first build a finger gesture recognizer, where you can use the multi-touch pad as a draw pad. <br>
This part will be built on top of your PSet3 Processing code. <br><br>

To achieve full credits in this part, we ask you to implement at least 3 different finger gestures / drawing patterns that can be recognized by your multi-touch pad. <br>
For example, you can implement your multi-touch pad to recognize letters (A, C etc.), some basic 2D shapes (triangle, circle etc.), or some simple symbols (check mark etc.). <br><br>

You don't have to over-complicate on the finger gesture design, but do make the drawn patterns and recognized items reasonably similar and related. <br>
For example, you can not have your finger draw one straight line on the multi-touch pad and the system recognizes it as "fish". <br><br>

<h4>$1 Unistroke Recognizer Library</h4> <br>
Like the blob detection in the PSet3, you don't have to implement the whole recognizing algorithm from scratch. <br>
Instead, you can use this Processing library called <b>$1 Unistroke Recognizer</b> (ACM UIST '07).<br><br>
<img src="images/pset4/$1 Unistroke Recognizer.png" width="650px"> <br><br>

$1 Unistroke Recognizer is a 2-D single-stroke recognizer designed for rapid prototyping of gesture-based user interfaces. <br>
It is called "$1" because in machine learning terms, $1 is an instance-based nearest-neighbor classifier with a 2-D Euclidean distance function, i.e., a geometric template matcher. <br><br>

Since it is an unistroke recognizer, there are some limitations you should take into consideration when design your finger gestures. <br>
First, the gesture should be performed by one finger and contains only one continuous stroke. <br>
For example, for the following 2 gestures designed for letter "A", only the left one can be recognized correctly by the algorithm as the one on the right contains more than one stroke: <br>
<img src="images/pset4/drawing-pattern-requirement-1.png" width="500px"> <br><br>

In addition, the algorithm recognizes the stroke direction but ignores the stroke "orientation".<br>
This is critical when implementing multiple gestures.<br>
For example, the algorithm would be able to distinguish the following 2 finger gestures: <br>
<img src="images/pset4/drawing-pattern-requirement-3.png" width="500px"> <br><br>

However, it will likely recognize these following 2 finger gestures as the same gesture: <br>
<img src="images/pset4/drawing-pattern-requirement-2.png" width="500px"> <br><br>

For more details of the $1 Unistroke Recognizer library, you can go to the <a href="https://github.com/nok/onedollar-unistroke-recognizer">library's webpage</a>. <br>
There is also a demo website for the $1 Unistroke Recognizer, where you can test the library's functionality and get a sense of how it works. The link is <a href="http://depts.washington.edu/acelab/proj/dollar/index.html">here</a>.<br><br>

<h4>Add finger gesture </h4> <br>
Once import the $1 Unistroke Recognizer library, you can add your customized finger gestures via the following function: <br><br>
<pre> OneDollar.learn(String gesture-name, int[] x-y-coordinates); </pre> <br>

You can obtain the x-y-coordinates for your desired finger gesture by either using your finger and draw the pattern on the multi-touch pad, or more conveniently using your mouse and trackpad + mouseDragged() function, and print out & record all the triggered points of your finger gesture. <br><br>
<img src="images/pset4/add-gesture.png" width="650px"> <br><br>

<h4>Bind finger gesture to callback function </h4> <br>

Once add the customized finger gesture, you would go ahead and bind it to a callback function, which will be triggered every time the algorithm detects the corresponding finger gesture.<br>

You can bind the finger gesture to a callback function via the following function: <br><br>
<pre> OneDollar.bind(String gesture-name, String callback-function-name); </pre><br>

Then implement the callback function :<br><br>
<pre> void foo(String gesture-name, float percentOfSimilarity, int startX, int startY, int centroidX, int centroidY, int endX, int endY){
    // do something fun
}
</pre> <br>

<h4>Track the finger gestures </h4> <br>

After finishing the setup, you will implement the actual tracking in the code.<br>
This is achieved via the following function: <br><br>
<pre> OneDollar.track(int x-coordinate, int y-coordinate); </pre><br>

You should update the UI to display the detected finger gesture whenever you do the finger gesture on the multi-touch pad. <br>
You could have something look like the following:<br> 
<img src="images/pset4/UI-recognizer-A.png" width="350px">
<img src="images/pset4/UI-recognizer-C.png" width="350px"> <br>


<h3>(2) Visualize the touching data in 3D</h3>

In this part, you will be implementing the multi-touch pad touching data in 3D, where the "height" of the roughly reflects how "hard" you are touching (remember in PSet3, the brightness of the 2D blob area roughly reflects how "hard" you are touching). <br>
<img src="images/pset4/UI-3d-visualization-1-finger-1.png" width="350px">
<img src="images/pset4/UI-3d-visualization-1-finger-2.png" width="350px"> <br><br>

Start by downloading <a href="software/pset4_3d_visualization_skeleton_v1.zip">the skeleton code for the PSet4 3D visualization from  here</a>. <br><br>

Once you open up the skeleton code, you will notice that it is quite similar to the PSet3 skeleton code. <br>
As a matter of fact, if you have the PSet3 all implemnted corrected, you already have most of the code written! <br>

<img src="images/pset4/pset4-skeleton-code.png" width="500px"> <br>

For the functions that share the same name with PSet3 (i.e. readSerial(), setBaseLine(), substractBaseLine(), setColors(), and interpolate()), you can directly copy your PSet3 code into the corresponding functions. <br><br>

For this part of the PSet, apart from the initialization in the setup() function, you are going to do the following three steps: <br>
<ol>
	<li>Draw XYZ axes for 3D visualization</li>
	<li>Implement camera view and control in via keyboard</li>
	<li>Update the 3D visualization based on interpolated PImage (i.e. <i>scaledbc</i>)</li>
</ol>
<br>

<h4>Draw XYZ axes for 3D visualization </h4> <br>

You will start by drawing out XYZ axes for 3D visualization in the <i>drawAxis()</i> function. <br>
You can draw them as a standard Cartesian coordinate system. <br><br>

The length of the X & Y axes should be the width and height of your interpolated PImage.<br>
The length of the Z axes should be slightly over the pixel value range of your interpolated PImage for better visualization. <br><br>

Once you finish the <i>drawAxis()</i> function, you should have something look like this (notice that the length of the X,Y,Z axes in the following image might not be accurate): <br>

<img src="images/pset4/UI-3d-visualization-drawAxis.png" width="500px"> <br>

<h4>Implement camera view control via keyboard </h4> <br>

In this part, you will be implementing an active camera view, which has the ability to change in zoom in/out, height in Z-axis and rotation in XY-plane. <br>
The camera view will be controlled via keyboard buttons. <br><br>

You should first initialize the "camera view" in Processing with the following method:
<pre>camera(float eyeX, float eyeY, float eyeZ, float centerX, float centerY, float centerZ, float upX, float upY, float upZ); </pre><br>

It sets the position of the camera through setting the eye position, the center of the scene, and which axis is facing upward. <br>
Moving the eye position and the direction it is pointing (the center of the scene) allows the images to be seen from different angles. <br><br>
You can also set the frame rate for better performance (e.g. if you are experiencing sketch laggs) via <i>frameRate(int rate)</i> function. <br>
For more details about the camera in Processing, please refer to the offical documents <a href="https://processing.org/reference/camera_.html">here</a>.<br><br>

You will implement the camera view control so that:
<ol>
	<li>press key "Q" and "E" control change in camera zoom in / out </li>
	<li>press key "W" and "S" control change in camera height in Z-axis </li>
	<li>press key "A" and "D" control change in camera rotation in XY-plane </li>
</ol>
<br>

The changes in camera view point should look like something in the following.<br>
Change in zoom in/out: <br>
<img src="images/pset4/UI-3d-visualization-cameraViewControl-zoom-out.png" width="350px">
<img src="images/pset4/UI-3d-visualization-cameraViewControl-zoom-in.png" width="350px"> <br><br>

Change in height in Z-axis: <br>
<img src="images/pset4/UI-3d-visualization-cameraViewControl-view-height-1.png" width="350px">
<img src="images/pset4/UI-3d-visualization-cameraViewControl-view-height-2.png" width="350px"> <br><br>

Change in rotation in XY-plane: <br>
<img src="images/pset4/UI-3d-visualization-cameraViewControl-rotate-1.png" width="350px">
<img src="images/pset4/UI-3d-visualization-cameraViewControl-rotate-2.png" width="350px"> <br><br>


<h4>Update 3D visualization </h4> <br>

The last part of the 3D visualization is to actually implement the 3D visualization based on your intepolated PImage. <br><br>

Recall from the PSet 3, we intepolated the 9x8 multi-touch pad touching data into a much larger PImage and assign the intepolated value pixel by pixel. <br>
We will be implementing something quite similar here, except the intepolated value now become the "height" (i.e. z-axis coordinate) + color. <br><br>

You will implement the 3D visualization as a set of 3D points, where the X,Y coordinates are the row & column number of the pixel on PImage, and the Z coordinate the intepolated value of the pixel. <br>
You will also implement a color gradient (of your choice) that represents the "height" (i.e. z-axis coordinate) information.<br>
You might find your old friend <i>map()</i> to be helpful during some value assignments.<br><br>

The resulting 3D visualization should look like something in the following.<br>

No finger touching: <br>
<img src="images/pset4/UI-3d-visualization-no-finger-1.png" width="350px">
<img src="images/pset4/UI-3d-visualization-no-finger-2.png" width="350px"> <br><br>

One finger touching: <br>
<img src="images/pset4/UI-3d-visualization-1-finger-1.png" width="350px">
<img src="images/pset4/UI-3d-visualization-1-finger-2.png" width="350px"> <br><br>

Two fingers touching: <br>
<img src="images/pset4/UI-3d-visualization-2-finger-2.png" width="350px">
<img src="images/pset4/UI-3d-visualization-2-finger-4.png" width="350px"> <br><br>



<!-- <h3>(3) An open-ended cool mini-application based on (1) and/or (2) (optional)</h3> -->




<br>

<h3>Grading</h3>

We will give 25 pts in total:
<ul>
	<li>5 pts: have 3 different finger gestures implemented.</li>
	<li>5 pts: the system correctly recognize all 3 different finger gestures and update the UI accordingly.</li>
	<li>5 pts: XYZ axes correctly draw for 3D visualization and update correctly with the active camera view.</li>
	<li>5 pts: camera view control correctly implemented with ability to change in zoom in/out, height in Z-axis and rotation in XY-plane.</li>
	<li>5 pts: 3D visualization correctly implemented and updates with the touching data (and can at least visualizes 2 fingers touching simultaneously.</li>
</ul>



        <br />
        <br />
      </section>

      <aside class="col-md-4 pull-left">
         <br /> <br /> <br /> <br />
<!-- 				 <h4>Pset Steps</h4><br>
				 <ul>
		 			<li><a href="#pset1">pset1 (due Sept. 21, 11.59pm): laser cut and bend the acrylic base</a><br /></li>
		 			<li><a href="#pset2">pset2 (due Oct. 5, 1pm): insert LEDs, add USB connecting and solder everything</a><br /></li>
		 			<li><a href="#pset3">pset3 (due Oct. 19, 1pm): write touch recognition so that you can determine (x,y) location of each finger</a><br /></li>
		 			<li><a href="#pset4">pset4 (due Oct. 26, 1pm): add an application of your choice</a><br /></li>
				</ul>
				<br /> <br /> <br /> <br />
        <img src="../2018-fall-6810/images/multi-touch-pad/iap1.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap2.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad//iap3.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap4.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap5.jpg" width="220px">
 -->



        <!-- Publication -->

        <br><br><br><br><br>

        <!-- Publication -->

<!-- <h4>Side Bar</h4><br>

    <ul>
      <li>Prof. Stefanie Mueller (Instructor)</li>
      <li>Lotta-Gili Blumberg (TA)</li>
      <li>Xin Wen (UTA)</li>
      <li>Loren Maggiore (LA)</li>
      <li>Mark Chounlakone (LA)</li>
    </ul>
 -->
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

      </aside>

    </div>
  </div>
  </div>
</section>

<div class="container">
	<div class="row">
		<div class="col-md-12 footer" style="text-align: center;">
			<span class="copyright">
			Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by
			<a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
			moji
			</a>].
			All Rights Reserved.

			<a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
			</a>
			<a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
			</a>
			<a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
			</a>
			</span>
		</div>
	</div>
</div>

<!-- Bootstrap -->
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script>

</body>
</html>
