<!DOCTYPE html>
<html>
<head>
	<title>HCI Engineering Group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- CSAIL ICON -->
	<link rel="CSAIL" href="../../images/icon/csail.ico" type="image/x-icon" />

	<!-- Bootstrap -->
	<link href="../../css/bootstrap.css" rel="stylesheet">
	<link href="../../css/custom-style.css" rel="stylesheet">
	
	<!-- jQuery --> 
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">
	
	<!-- Google Analytic -->
	<script type="text/javascript" src="../../js/analytics.js"></script>
	
	<style>
	.etech-sch-col1 {width:60px; border: 1px solid black;padding:10px;}
	.etech-sch-col2 {width:120px; border: 1px solid black;padding:10px;}
	.etech-sch-col3 {width:450px; border: 1px solid black;padding:10px;}
	.etech-sch-col4 {width:70px; border: 1px solid black;padding:10px;}
  .etech-sch-col5 {width:70px; border: 1px solid black;padding:10px;}
  /*.etech-sch-col6 {width:170px; border: 1px solid black;padding:10px;}*/
  ul {
    padding:0px;padding-left:10px;margin:0px;
  }
	</style>
</head>

<body>
<header class="main_header">
	<!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
	<div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
</br></br></br></br>
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2018)</a><br></h>
        <h2 class="headline">Intro to Electronics</h2>

  <!-- <img src="images/laser-cutting/laser-cutter.png" width="183px" /> <img src="images/laser-cutting/laser-cutter-cutting.png" width="250px" /> -->
          <br>
          <hr>

<h3 span style="color:red">Deliverable (due Sept. 28, 11.59pm)</a></h3>

<a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38762182">Upload to gradebook a video showing how you blow the candle on/off.<br> 
	Your prototype needs to use the battery as a power source (disconnect from your laptop). <br> 
	It also needs to use the Arduino nano + protoboard (aka: soldered, and not plugged cables with the big breadboard)</a><br><br>

<span style="color:red">work in progress</span> <br> <br>

<h3>Goal</h3>

We are going to wire up a wind sensor and an LED to create a 'electronic candle' you can blow out.
<br><br>

<img src="images/electronics-tutorial/candle.jpg" width="583px" /> 

<br><br>
<h3>Here's what we do today:</h3>
<ul>
	<li>solder the sensor together</li>
	<li>wireup sensor and LED using breadboard + microcontroller</li>
	<li>write code to detect sensor input and turn LED on/off using Arduino IDE</li>
	<li>remove power from laptop and instead use a 9V battery</li>
	<li>minutiarize the setup by soldering onto a protoboard</li>
</ul>

<h3>Check if you have all components:</h3><br>

Grab a bag for your team (one bag per team, same team as your group projet).</br><br>

<span style="color:red">Lotta: add picture of the all components that are in the bag labeled. LED, button, wind sensor, 9V battery, battery clip, switch, Arduino nano, protoboard, what else?</span>
</br></br>

You should have:</br>
<ul>
	<li>LED</li>
	<li>button</li>
	<li>wind sensor</li>
	<li>9V battery</li>
	<li>battery clip</li>
	<li>switch</li>
	<li>bunch of different resistors for LEDs (ca 100ohm)</li>
	<li>bunch of different resistors for button (1kOhm)</li>
	<li>Arduino nano</li>
	<li>protoboard</li>
</ul>
</br></br>
<span style="color:red">Lotta: add spreadsheet where you and Mark can check in which team already got their bags.</span>
</br></br>



<h3>Breadboard</h3><br>

The breadboard has holes for plugging in components.<br>
Certain rows and columns are electrically connected together.<br>
Each column of 5 holes is connected internally. <br>
If you insert one end of side of a component into one set of the holes in a column of 5, and then insert one side into a second set of holes across the gap, the pins will not be connected together.<br><br>

If you were to rip the back off your breadboard (DO NOT DO...we ruined the one in the photo so you don't have to!) you could more clearly see which rows and columns are connected.<br><br>

<img src="images/electronics-tutorial/breadboards_side_by_side.jpg" width="383px" /> <br>
<br>The back of a breadboard, revealing the metal connectors inside. Note how there are many short connectors (with five connecting holes), and only several longer connectors, often called "rails" or "busses" and which we'll use for power distribution.</b>
<br><br>

There are good and bad ways to wire a breadboard, just like there are good and bad ways to write code. The general rule is to keep the wires short and sweet...avoid large loops.<br><br>

<span style="color:red">When adding components, be careful not to short them! Here we have an LED with both terminals plugged into the same row. They are therefore electrically connected with each other. DO NOT DO THIS! </span><br><br>

<img src="images/electronics-tutorial/led-bad.jpg" width="383px" /> <br><br>

Instead, plug LEDs and other electrical components along the other access like this: <br><br>

<img src="images/electronics-tutorial/led-good.jpg" width="383px" /> <br><br>

The long red and blue buses are traditionally used for power and ground. For example, if you were powering your devices with a 9V batter, you could plug it in as so: <br><br>

<img src="images/electronics-tutorial/power-rails.jpg" width="383px" /> <br><br>

Note that you could also switch the two rails with each other, they are only 'wires' themselves, but plugging red into the blue rail would be visually confusing since they are color-coded.<br><br>

<img src="images/electronics-tutorial/swapped-power-rails.jpg" width="383px" /> <br><br>

<span style="color:red">NEVER EVER EVER short your power and ground!!! It's okay here because neither the Arduino is connected nor the battery is plugged in, otherwise you would have to trash the Arduino after this.</span><br><br>

<img src="images/electronics-tutorial/bad-power.jpg" width="383px" /> <br><br>

<span style="color:red">NEVER EVER EVER short your power and ground, even through a wire!!! It's okay here because neither the Arduino is connected nor the battery is plugged in, otherwise you would have to trash the Arduino after this.</span><br><br>

<img src="images/electronics-tutorial/bad-power-2.jpg" width="383px" /> <br><br>


<h3>Connect Micro-Controller to Breadboard</h3><br>

Make sure nothing is plugged into your breadboard and your arduino is off (not plugged into your computer or any other power source). <br><br>

<span style="color:red">As a general rule, never play with live wires.<br> Always remove all power sources before plugging and unplugging wires and other devices.</span><br><br>

The micro-controller has a 3.3V output (+) and a 0V/GND (-, ground).<br><br>

Use a jumper wire to connect the 3.3V to the red horizontal rail and another wire to connect the GND to the other horizontal rail as shown in the green checkmark image above. <br>

Even though this might not be necessary, it will make it easier to wire things up later. <br><br>

<h3>Connect your LED</h3><br>

Before you can connect your LED, you also need a resistor.<br><br>

The reason for this is that your micro-controller provides 3.3V (or 5V if you use the pin right next to the 3.3V on your Arduino), but the LEDs we gave you only need about 2V if it is yellow or red and 3V if it is white, green, or blue. <br><br>

Furthermore, they don't want more than 20mA of current (or else they blow up), and contribute only a negligable resistance to the circuit. Therefore, in order to get the current down to 20mA, we'll have to calculate what resistor we will need.<br><br>

Here's the math for the yellow/red LEDs:<br><br>

The voltage going through the resistor will be 3.3V - 2V = 1.3V<br>
V=I*R (voltage = current * resistance)<br>
1.3V = 20mA * R<br>
R = 65 Ohms <br><br>

To be safe, you can use a larger resistor. <br>
Probably anything 100 Ohms - 650 Ohms will work fine, though a large resistor will lead to a less bright LED since there will be less current. <br><br>

To find the right resistor (they all have the color coded rings on them), you do the following:<br><br>

Either use one of the color-charts as you see below:<br><br>

<img src="images/electronics-tutorial/colorcode-resistors.png" width="683px" /> <br><br>

Or you can use a Resistor Color Code Calculate website that gives you the right resistor:<br>
<a href="https://www.hobby-hour.com/electronics/resistorcalculator.php/">https://www.hobby-hour.com/electronics/resistorcalculator.php</a><br><br>

Now that you have your LED and the resistor, you can wire up your LED.</br> 
Use the following wiring diagram.<br><br>

<span style="color:red">Note that an LED has to be plugged in the right direction, otherwise it will blow and you can trash it! </span><br><br>

The longer leg must be connected to the higher voltage. What does this mean in our setup? <br>
The 


On the other hand, the resistor can be plugged in facing either way and on either side of the LED. <br><br>

<img src="images/electronics-tutorial/led-on-diagram.png" width="383px" /> <br><br>

If you don't know how to read the this diagram, ask a TA to help you better understand them, you will need this again further along in the tutorial (and in the future for your project).<br><br>

Now we add control from the Arduino, for this we connect to high/low pin that we can turn on and off. 
<br><br>
Build this:
<br><br>
<img src="images/electronics-tutorial/led-flash-diagram.png" width="383px" /> <br><br>

You should see your LED blink now when plugged into power (if the Arduino is still running your blink code that you uploaded as part of your homework).<br><br>

Here's the blink code snippet and you can see it writes High/low to pin 13, which turns on/off the LED.
<br><br>

<code>
int led = 13;<br>
<br>
// the setup routine runs once when you press reset:<br>
void setup() {                <br>
  // initialize the digital pin as an output.<br>
  pinMode(led, OUTPUT);     <br>
}<br>
<br>
// the loop routine runs over and over again forever:<br>
void loop() {<br>
  digitalWrite(led, HIGH);   // turn the LED on (HIGH is the voltage level)<br>
  delay(1000);               // wait for a second<br>
  digitalWrite(led, LOW);    // turn the LED off by making the voltage LOW<br>
  delay(1000);               // wait for a second<br>
}
</code>

<h3>Add Button to your LED to turn it on/off</h3><br>


Next, add a button to your LED using this wiring chart.<br>
We are going to read on pin 2 if the button is pressed or not and then turn the LED on/off on pin 13 based on the button's state.<br>
<span style="color:red">Did you unplug your Arduino before you started wiring??? If not, please do. No live wiring or you might fry your micro-controller if you plug a wire wrongly.</span><br><br>

Add the button by wiring this together. Use any resistor 1k-10k:<br><br>

<img src="images/electronics-tutorial/button-diagram-2.png" width="483px" /> <br><br>

How does this work? Note that we will be using pin 2 only as an input pin, not an output pin. That means that depending on whether the button is pressed, it will read either a high voltage close to 3.3V or a low voltage close to 0V. Which does it read when the button is pressed? Which does it read when the button is not pressed? Ask a TA if you are confused!<br><br>

If you wire up the button slightly differently, the answers to the above questions might change. Without having to do any re-wiring, think about what the readings on the pin would be if you instead wired the button like this:

<img src="images/electronics-tutorial/button-diagram-inverted.png" width="483px" /> <br><br>

Which of the wirings above do you think are better? Why? <br><br>

Again, if you aren't sure about these concept questions, ask a TA!<br><br>


<h3>Write Arduino Code to turn LED on/off</h3><br>

Now, let's write our own code. To turn the LED on and off with the button!<br>

The Arduino has a setup() function that is called exactly once on start.<br>
The loop() function runs repeatedly until you shut the micro-controller off.<br>
Before either of these functions, you can declare variables.<br><br>

Your LED is wired on Pin 13 and button is wired to pin 2. Declare this at the top of your code by adding the following lines of code at the top.<br><br>


<code>
const int buttonPin = 2;<br>
const int ledPin =  13;<br><br>
</code>

We also will declare a variable that will keep track of the button state, whether it is pressed or not. <br><br>

<code>
int buttonState = 0;
</code><br><br>

In the setup function, we declare whether the pins are inputs or outputs.<br><br>

<code>
pinMode(ledPin, OUTPUT);<br>
pinMode(buttonPin, INPUT);
</code><br><br>

Lastly in the loop function we conditionally turn the LED on or off depending on whether the button is pressed.<br><br>

<code>
buttonState = digitalRead(buttonPin);<br>
if (buttonState == HIGH) {<br>
// turn LED on: <br>
digitalWrite(ledPin, HIGH);<br>
} <br>
else {<br>
// turn LED off:<br>
digitalWrite(ledPin, LOW); <br>
}<br>
</code>

If it doesn't work, you can try debugging with your serial monitor. The serial monitor is a great debugging tool, as it will give you live updates on the values being read and calculated on the arduino.

In the setup part of the code, add a line somewhere that initiates the serial monitor:<br><br>

<code>Serial.begin(9600)</code><br><br>

Then after finding the button state in the loop, have the serial monitor print the state of the button:<br><br>

<code>Serial.println(buttonState)</code><br><br>

While running the arduino, you can open the serial monitor by going to Tools --> Serial Monitor. You may need to change the baud rate to 9600 in the serial monitor (or change it in the setup to whatever the default you have is).

<h3>Solder your wind sensor</h3><br>

The wind sensor doesn't come with legs (aka: header pins) to plug it into the breadboard, so we need to solder some on it.<br><br>

If you have soldered before and are confident in what you are doing, go ahead and grab a soldering iron and some solder thread! Otherwise, ask a TA to show you how to do it if you have never done it before.<br><br>

<img src="images/electronics-tutorial/windsensor.png" width="283px" /> <img src="images/electronics-tutorial/solder-during.jpg" width="383px" /> <br><br>

<br><br>

<h3>How does the wind sensor actually work?</h3><br>

Our wind sensor is actually what is called a “hot-wire” wind detector. </br>
A wire warmed up by a little electricity will cool when air blows across it.</br>
When the wire cools, its conductivity changes. </br>
The other electronics on the board detect this change and turn it into values the Arduino can read.</br></br>


<h3>Connect your wind sensor to the board</h3><br>

Once you have the header pins soldered on, connect the windsensor to your circuit using the following wiring diagram. <span style="color:red">Did you unplug your Arduino? No live wiring.</span><br><br>

Usually, when wiring up a sensor, you will need to wire up the ground and high voltage (in our case 3.3V) up for reference. In addition, you wire up some pins to do the reading. In the case of the button, our input was simply binary: either the button was on or it was off. For that sort of reading, we use a digital pin. The arduino also comes with analog pins that can read voltages on a scale. This is useful when a sensor provides an output with a gradient value. In this case, we are interested in the wind speed, which is on a continuous scale. Hence, we are using analog pins A0 and A1 as our inputs.

<br>

<img src="images/electronics-tutorial/wind-sensor-diagram-2.png" width="383px" /> <br><br>

<h3>Add code for detecting blowing air onto the sensor</h3><br>

Download the code for the wind sensor <a href="https://drive.google.com/open?id=1qNz9xMhzCPzKHjEM0KepP6mbsn48ToiS" style="color:red">here</a>. Make sure you understand how it works. There are several conversions that are done in the loop. You do not need to understand the details of how those work.<br><br>

If the light keeps going out or it fails to go out, you might need to calibrate the wind speed threshold. Look at the line that says <code>if (WindSpeed_MPH > 20)</code> and change the 20 to be bigger or smaller as necessary. It will be useful to use the serial monitor here to find an appropriate threshold.<br><br>

Once you complete this, you should be able to blow the LED off and use the button to turn it back on.<br><br>

<h3>Replace laptop power via USB cable with a 9V battery</h3><br>

Next, we want to free our setup from our laptop.<br>
Once the code is uploaded on the Arduino, it constantly keeps running, so there is no need for the laptop.<br><br>

The only reason we are still using the laptop is because it's supplying the energy to the micro-controller.<br>
However, we can replace the power supply using a battery and battery connector.<br><br>

Using the switch on the battery is important because even when the candle is out, your Arduino is still running. So remember to power it down completely with the switch (or by unplugging the battery) or you’ll run out of juice very soon.<br><br>

Let's solder a switch to our batter pack wires. Remember not to have the battery plugged in while we do this!<br><br>

Before soldering the wire to the switch, put a bit of heat shrink on! This will protect the exposed wires.<br><br>

<img src="images/electronics-tutorial/before-soldering.jpg" width="383px" /> <br><br>

<img src="images/electronics-tutorial/after-soldering.jpg" width="383px" /> <br><br>

After soldering both the battery wire and an additional wire to the switch (make sure that at least one wire is soldered to the middle pin!), you can shrink the heat shrink using a heat gun. Ask a TA if you do not know how to use one.<br><br>

before<br>

<img src="images/electronics-tutorial/heat-shrink.jpg" width="383px" /> <br><br>

after<br>

<img src="images/electronics-tutorial/heat-shrunk.jpg" width="383px" /> <br><br>

Finally, to avoid accidentally shorting your battery, you can cut off the third pin, as it is not necessary for our purpose.<br><br>

<img src="images/electronics-tutorial/clipped.jpg" width="383px" /> <br><br>

Now just plug in your battery power into the Arduino Vin and the ground into Gnd, and it should work without laptop power!<br><br>

<h3>Minituarizing your setup</h3><br>

The breadboard and Arduino Uno are pretty chunky and will by hard to integrate into a physical prototype.<br><br>

We can make everything much smaller by using an Arduino Nano and a protoboard.<br><br>

However, for this, we need to solder again!<br><br>

<img src="images/electronics-tutorial/arduino-nano-protoboard.jpg" width="383px" /> <br><br>

Transfer your design and ask a TA if you have any questions!

<h3>Create a new housing (optional)</h3><br>

If you are up for it, you could also 3D print a new housing for your candle.

<img src="images/electronics-tutorial/led-candle.jpg" width="383px" /> <br><br>






<br>

        <br />
        <br />
        <br />
      </section>
      
      <aside class="col-md-4 pull-left">
        
        <!-- Publication -->

        <br><br><br><br><br>

        <!-- Publication -->

<!-- <h4>Side Bar</h4><br>

    <ul>
      <li>Prof. Stefanie Mueller (Instructor)</li>
      <li>Lotta-Gili Blumberg (TA)</li>
      <li>Xin Wen (UTA)</li>
      <li>Loren Maggiore (LA)</li>
      <li>Mark Chounlakone (LA)</li>
    </ul>
 -->
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

      </aside>
      
    </div>
  </div>
  </div>
</section>

<div class="container">
	<div class="row">
		<div class="col-md-12 footer" style="text-align: center;">
			<span class="copyright">
			Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by 
			<a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
			moji
			</a>]. 
			All Rights Reserved.
			
			<a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
			</a>
			<a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
			</a>
			<a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
			</a>
			</span>
		</div>
	</div>
</div>

<!-- Bootstrap --> 
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script> 

</body>
</html>