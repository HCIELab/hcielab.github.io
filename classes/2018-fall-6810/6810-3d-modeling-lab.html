<!DOCTYPE html>
<html>
<head>
  <title>HCI Engineering Group</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <!-- CSAIL ICON -->
  <link rel="CSAIL" href="../../images/icon/csail.ico" type="image/x-icon" />

  <!-- Bootstrap -->
  <link href="../../css/bootstrap.css" rel="stylesheet">
  <link href="../../css/custom-style.css" rel="stylesheet">

  <!-- jQuery -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">

  <!-- Google Analytic -->
  <script type="text/javascript" src="../../js/analytics.js"></script>

  <style>
  .etech-sch-col1 {width:60px; border: 1px solid black;padding:10px;}
  .etech-sch-col2 {width:120px; border: 1px solid black;padding:10px;}
  .etech-sch-col3 {width:450px; border: 1px solid black;padding:10px;}
  .etech-sch-col4 {width:70px; border: 1px solid black;padding:10px;}
  .etech-sch-col5 {width:70px; border: 1px solid black;padding:10px;}
  /*.etech-sch-col6 {width:170px; border: 1px solid black;padding:10px;}*/
  ul {
    padding:0px;padding-left:10px;margin:0px;
  }
  </style>
</head>

<body>
<header class="main_header">
  <!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
  <div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
</br></br></br></br>
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2018)</a><br></h>
        <h2 class="headline">3D Modeling Lab (Rhino3D, Grasshopper and Firefly) </h2>

  <!-- <img src="images/laser-cutting/laser-cutter.png" width="183px" /> <img src="images/laser-cutting/laser-cutter-cutting.png" width="250px" /> -->
          <br>
          <hr>

We think the entire tutorial can be done in 60-70 minutes, but if you need longer, upload 3 is only due next friday in case you get stuck. <br><br>

<h3 span style="color:red">Upload 1 (end of class, Deadline: Oct 5, 2.30pm)</a></h3>
<a style="color:black" href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/39432587">
  Once you complete Task 1 in this tutorial, take screenshots of your your 3D candle and upload it to Gradebook 
</a> <br> 
<br>

Add image <br>
Add video <br>

<h3 span style="color:red">Upload 2 (end of class, Deadline: Oct 18, 2.30pm)</a></h3>
<a style="color:black" href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/39432587">
  Once you complete Task 2 in this tutorial, make a (i) video of the parametric candle (ii) .gh file of your grasshopper visual code along with (iii) screenshots of your script to Gradebook</a> <br> 
<br>

Add image <br>
Add video <br>

<h3 span style="color:red">Upload 3 (Deadline: Oct 24, 1 pm)</a></h3>
<a style="color:black" href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/39432525">
  Once you complete Task 3,4 and 5 in this tutorial, make a (i) video of the virtual parametric candle changing flame based on wind sensor, and add (ii) .gh file of your grasshopper visual code along with (iii) final .STL file of your exported 3D model and (iv) screenshots of your script to Gradebook</a> <br> 
<br>

Add image <br>
Add video <br>

<h3>Goal:</h3>
We will learn to interface between digital 3D modeling environments and physical interfaces. We are going to connect the arduino wind sensor+led circuit (that you built in first lab) with digital 3D modeling software Rhino3D  and its plugins (Grasshopper and Firefly). 

There are many advantages of the digital-physical interfacing:
<ul>
  <li> Real-world sensor data can be used for controling 3D models in virtual world
  <li> Virtual models can be used to control or actuate physical interfaces in real world    
</ul>
<br>

(Note: There are multiple resources listed at the end of this tutorial for more information on 3D parametric modeling using Rhino, Grasshopper and other plugins.)

<br><br>

<span style="color:red">
  Before we start, check if you have all your components of your original wind sensor + LED circuit work correctly. 
  </span><br>

Now let's forget the circuit for a bit and dive into the digital world.<br> 
<h3>Background:</h3>
 While there are multiple 3D modeling software available (like Solidworks, OnShape, AutoCAD, Sketchup), we will be using Rhino3D for our lab. It is very easy to learn, intuitive to use and has over 100 plugins (together called Rhino-zoo! ). The applications vary from architecture design, to FEM analysis, to Neural networks for design optimization etc. In particular, the popularity of Rhino3D stems from the plugin called grasshopper which allows for parametric visual programming (as youwill learn today). We will also be using Firefly (which is a plugin for grasshopper) which allows the parameters of design to be controlled by arduino inputs/outputs. <br><br>

In short, we use:<br>
<ul>
  <li><a href="https://www.rhino3d.com/">Rhino3D </a>: for basic 3D modeling<image>
  <li><a href="https://www.grasshopper3d.com/">Grasshopper </a>: for parametric 3D modeling <gif>
    <li><a href="http://www.fireflyexperiments.com/">Firefly </a>: for interfacing with arduino input/outputs <gif/movie>
</ul><br>
<img src="images/3dmodeling/rhino-gh.png" width="750px" /><br><br>


<h3>Here's what we will design and build today:</h3>

<ul>
  <li>Task 1: First familiarize yourself with Rhino3D and 3D model a candle</li>
  <li>Task 2: Familiarize with Grasshopper plugin and design a parametric candle (that can change height and diameter and flame size).
  <li>Task 3: Interface with Firely plugin and control the flame of the parametic candle using the wind sensor (so when your LED turns off, even the virtual flame turns off)
  <li>Task 4: Change the parameters of the candle design and export STL file for 3D printing</li>
  <li>Task 5: (Optional): Download a candle model from free open source CAD database and control that digital candle using wind sensor</li>

</ul>
<br>

<h3>Task 1: Familiarizing with Rhino3D and modeling candle</h3><br>
If all the plugin installations are setup properly  on your computer, you should be able to open Rhino. It opens 4 viewports and looks like any typical CAD software. We will 3D model a simple candle to familiarize with the interface.
<ul>
    <li>Set units of your file to inches or centimeters or millimeters. Type “units” in the command line and then select the units you want to work with
    <li>Make all your viewports to "ghosted" or "shaded"
    <li>3D model the candle base: Refer the video for 3D modeling of the candle base. The commands we will use are : circle, extrusion, cap
    <li>3D model the flame: Commands to use are : eliipse, line, revolve
    <li>Note: You can either model using commands in the command window (top white bar) or using the toolbars on left
</ul>
<br><br>

Now that you have the candle modelled, we will use some transformations to change the shape of the candle using: Scale, Scale1D, Scale2D and also change the color properties. <span style="color: red"> Once you have modeled the candle, save the file from File -> SaveAs and upload it to your gradebook with screenshots </span><br><br>

<video width="750"  controls>
  <source src="images/3dmodeling/candle3Dmodeling2.mp4" type="video/mp4"></video>
 <br><br>

<h3>Task 2: Familiarizing with Grasshopper and modeling "parametric" candle</h3><br>
Open a new file and type “grasshopper” in the command line and it will open a new window. This new window is your visual programming environment - like a visual script. If you create a 3D model (lets say a sphere, the 3D model will show up in Rhino window, but you will be able to manipulate it realtime through grasshopper, as we will see in next steps. <br><br>

You also have sliders and sequence generators that you can use to control parameters (hence the name “parametric” design) <br><br>

Let's try a simple addition script, first with discrete numbers and then with sliders <br><br>

<video width="750"  controls>
  <source src="images/3dmodeling/addition_gh.mp4" type="video/mp4"></video>
    <br><br>

Now you can use the output of the addition as the input parameter for 3D sphere 
<br><br>

#3 Firefly:
Before we start controlling our arduino board with Firefly, we need to first upload a arduino script that will allow this communication. So, open your arduino IDE, and download this <a href="https://drive.google.com/open?id=1rniLeJybBRAkoNDu_tWF_Ia5wzupVhQR ">firefly firmata</a> and click compile and upload. <span style="color: red"> Make sure you update your board to Arduino Nano and your port to the right COM port before uploading. </span>
<br><br>
<img src="images/3dmodeling/firmata.png" width="750px" /><br><br>

Close arduino (imp) → otherwise your port will be busy communicating with arduino and Firefly will not be able to get/send data to microcontroller. 
<br><br>

Check if the communication is established with Firefly by going back to Rhino/GH and clicking on the firefly toolbar in gh. Open port → select com port → and then toggle true. If it says “Hooray, the …” then you have successfully established connection. 
<br><br>

Now toggle “false” (always remember to stop communication with firefly when switching to arduino and vice versa)
<br><br>

#4 Arduino: 
While you can write up the exact same script you wrote last week in firefly and upload through firefly, for now we will use arduino itself. So open arduino again, and upload this new script candlescript. This script is same as before except for one change. We will also print 0/1 based on whether the LED is on or off. We will be printing in serialport (not serial monitor). This will allow us to read the values 0/1 in firefly and we can use it for changing 3D model parametrically (as we did in the addition part). Once you upload it, open the serial plotter and check if the values are being plotted (switch on and blow of your led a couple of times)
<br><br>

Now close arduino (to stop communication with port). 
<br><br>

Go back to Firefly.
<br><br>

<h3> Task 2. Changing color of the sphere through arduino wind sensor input </h3>
Now you will test if the values that were being printed in serial port are being read by firefly.
<br><br>

<span style="color:red">
Upload1. Video of color changing of the sphere </span><br>
Optional (you can also change the size of the sphere using the input from the wind sensor)<br>

<h3> Task 3. Modeling a parametric candle and controlling the flame using wind sensor </h3>
visual script
<span style="color:red">
Upload 2. Video of the color and flame going on/off based on input from wind sensor </span><br>

<h3>Task 4. Parametric candle → export baking/stl file </h3>
<span style="color:red">
(Upload?)
</span><br>

<h3>Task 5. <span style="color:blue">(Optional) </span> Download a model from thingiverse and now control that using wind sensor </h3>
<span style="color:red">
(Upload?)
</span><br>









    <br><br><br><br>

    ----------------------------------------------------------------------------------------------------------------------------<br>
Firefly offers a set of comprehensive software tools dedicated to bridging the gap between Grasshopper (a free plug-in for Rhino) and the Arduino micro-controller. It allows near real-time data flow between the digital and physical worlds – enabling the possibility to explore virtual and physical prototypes with unprecedented fluidity.<br><br>

A notable distinction for Firefly is that it is the first visual microcontroller programming environment designed specifically for a 3-D parametric CAD package (such as Rhino). This feature means that real-world data, acquired from various types of sensors or other input devices (video cameras, internet feeds, or mobile phone devices, etc.) can be used to explicitly define parametric relationships within a Grasshopper model. <br><br>

In order to begin working with Firefly, we’ll first need to program the Arduino to set up all of the pins so that they can communicate back and forth with Grasshopper. Fortunately, we’ve already taken care of all the dirty work, so you don’t have to worry about a thing. First, copy/paste the three sub-folders from within the Arduino Code (from the zip file you downloaded) into your Arduino Sketchbook folder which is usually found in one of two places on your hardrive: <br><br>

----------------------------------------------------------------------------------------------------------------------------<br>
Resources






















    <br><br><br>
      </section>

      <aside class="col-md-4 pull-left">

        <!-- Publication -->

        <br><br><br><br><br>


<!-- <h4>Side Bar</h4><br>

    <ul>
      <li>Prof. Stefanie Mueller (Instructor)</li>
      <li>Lotta-Gili Blumberg (TA)</li>
      <li>Xin Wen (UTA)</li>
      <li>Loren Maggiore (LA)</li>
      <li>Mark Chounlakone (LA)</li>
    </ul>
 -->
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

      </aside>

    </div>
  </div>
  </div>
</section>

<div class="container">
  <div class="row">
    <div class="col-md-12 footer" style="text-align: center;">
      <span class="copyright">
      Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by
      <a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
      moji
      </a>].
      All Rights Reserved.

      <a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
      <img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
      </a>
      <a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
      <img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
      </a>
      <a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
      <img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
      </a>
      </span>
    </div>
  </div>
</div>

<!-- Bootstrap -->
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script>

</body>
</html>
