<!DOCTYPE html>
<html>
<head>
	<title>HCI Engineering Group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- CSAIL ICON -->
	<link rel="CSAIL" href="../../images/icon/csail.ico" type="image/x-icon" />

	<!-- Bootstrap -->
	<link href="../../css/bootstrap.css" rel="stylesheet">
	<link href="../../css/custom-style.css" rel="stylesheet">

	<!-- jQuery -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">

	<!-- Google Analytic -->
	<script type="text/javascript" src="../../js/analytics.js"></script>

	<style>
	.etech-sch-col1 {width:60px; border: 1px solid black;padding:10px;}
	.etech-sch-col2 {width:120px; border: 1px solid black;padding:10px;}
	.etech-sch-col3 {width:450px; border: 1px solid black;padding:10px;}
	.etech-sch-col4 {width:70px; border: 1px solid black;padding:10px;}
  .etech-sch-col5 {width:70px; border: 1px solid black;padding:10px;}
  /*.etech-sch-col6 {width:170px; border: 1px solid black;padding:10px;}*/
  ul {
    padding:0px;padding-left:10px;margin:0px;
  }
	</style>
</head>

<body>
<header class="main_header">
	<!-- to be filled by javascript, see header.html -->
</header>

<section class="main_container">
	<div class="container">
    <div class="row nothing">

      <section class="col-md-8 pull-right main-content">
</br></br></br></br>
        <h4 class="medium.headline"><a href="6810-engineering-interactive-technologies.html">6.810 Engineering Interactive Technologies (fall 2018)</a><br></h>
        <h2 class="headline">Multi-Touch Pad</h2>

  <!-- <img src="images/laser-cutting/laser-cutter.png" width="183px" /> <img src="images/laser-cutting/laser-cutter-cutting.png" width="250px" /> -->
          <br>
          <hr>

<h3>Goal</h3>

You are going to build an acrylic multi-touch pad that works based on the principles of FTIR.

<br><br>
<h3>The steps will include:</h3>
<ul>
	<li><a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766241" style="color:red">pset1 (due Sept. 21, 11.59pm): laser cut and bend the acrylic base (25pts)</a></li>
	<li style="color:red"><a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766243" style="color:red">pset2 (due Oct. 5, 1pm): insert LEDs, add USB connecting and solder everything (25pts)</a></li>
	<li style="color:red"><a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766245" style="color:red">pset3 (due Oct. 19, 1pm): write touch recognition so that you can determine (x,y) location of each finger (25pts)</a></li>
	<li style="color:red"><a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766247" style="color:red">pset4 (due Oct. 26, 1pm): add an application of your choice (25pts)</a></li>
</ul>

<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/opencv1.png" width="600px">
<img src="../2018-fall-6810/images/multi-touch-pad/opencv2.png" width="600px">

<h3>Parts</h3><br>

You will get from us:<br><br>

 <ul>
          <li>a camera</li>
          <li>an acrylic sheet (6"x24", 7/32 thick)</li>
          <li>USB connector + cover</li>
          <li>a switch</li>
          <li>8 LEDs (one of them is an extra!)</li>
          <li>resistors</li>
          <li>alligator clips</li>
          <li>microcontroller</li>
          <li>breadboard</li>
          <li>prototyping cables</li>
</ul>

<br><br>

<h3>Equipment needed:</h3><br>

To build the multi-touch pad you need access to the following equipment:
 <ul>
          <li>a laser cutter</li>
          <li>a heat gun or strip heater for bending the sheet</li>
          <li>a soldering iron</li>
        </ul>


<br>
<hr>
<br>

<a id="pset1" class="anchor"><h3 style="padding-bottom:5px">pset1 (due Sept. 21, 11.59pm): laser cut and bend the acrylic base</h3></a><br>
<span style="color:red">You can start this now.</span>

<br><br>

<h4>Grading (25 points total): </h4>
      <ul>
        <li>finished all steps: 9 points</li>
        <li>clean bend with no heat bubbles: 4 points</li>
        <li>enough space for camera attachment below LEDs: 4 points</li>
        <li>edges have a clean cut: 2 points</li>
        <li>no burn marks on pad: 2 points</li>
        <li>snug hole for LEDs: 2 points</li>
        <li>touchpad stands stable and does not wiggle: 2 points</li>
      </ul>

<br><br>

<h4>Draw overall dimensions for Multi-touch Pad </h4><br>

After laser cutting + bending, the touch pad should have the following height + tracking area:<br><br>

<ul>
     <li>height when standing on a table: 18cm</li>
     <li>tracking area on top: 14cm fold to fold x 12cm wide</li>
     <li>add thin engraved lines at the locations where you will bend your pad</li>
     <li>do not change any of these dimensions since camera image will not be in focus anymore and you will have tracking problems later on</li>
</ul>
<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/laser-cut-drawing-labeled.png" width="700px"><br><br>

<h4>Add row for LEDs, switch, resistor</h4><br>

On one side of your touch pad, add the row that will hold the LEDs and the on/off switch:<br><br>

Add from left to right:<br>
<ul>
      <li>leave 7cm of space from the bottom (the camera will be glued underneath the LEDs)</li>
      <li>1 hole for the switch</li>
      <li>1 hole for the resistor</li>
      <li>2 holes for wires near the resistor</li>
      <li>7 holes for the LEDs</li>
      <li style="color:red">It is unlikely that you will get all the hole sizes right the first time. Use the spare part of acrylic you have on your sheet to test the hole sizes first. Does the LED really hold in the hole or does it fall out easily etc?</li>
</ul>

<br><br>
<h4>Add custom engraving / cut</h4><br>

    <ul>
      <li>on the side that does not hold the LEDs, add a custom cut-out or engraving</li>
      <li>this can be anything you like, e.g. your name, an image, the MIT logo, be creative</li>
    </ul>

  <br><br>

<h4>Laser cut</h4><br>

Now you are ready for laser cutting.<br>
Make sure to test your laser cut settings (power/speed) first on a small area on your acrylic sheet.<br> 
We recommend leaving the bottom paper sheet on so you don't get any burn marks.<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/lasercut.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/lasercut-finished.png" width="300px">

  <br><br>
  <h4>Bend with stripheater or heatgun</h4><br>

Now use strip heater or heat gun to bend the acrylic sheet.<br><br>

 <ul>
 	 <li>make sure you peeled off any protective sheet on the acrylic</li>
      <li>warm up equally from both sides to make sure the sheet is thoroughly heated</li>
      <li>use an alignment aid to make sure you get a 90 degree bend</li>
      <li style="color:red">test with a small piece of acrylic first if you haven't already done so in class:<br> you want to have nice 90 degree angles<br> you want to make sure that when you bend the second side, your pad will stand stable and does not wobble <br> you want to avoid heat bubbles from overheating as much as possible (those will create tracking problems later)</li>
  </ul>

<br> <br>
<img src="../2018-fall-6810/images/multi-touch-pad/stripheater.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/stripheater-test.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/stripheater-bend1.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/stripheater-bend2.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/stripheater-done.png" width="300px">

<br> <br>
  <h4>Done! Take photos and upload to gradebook</h4><br>

<a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766241" style="color:red">Take 3 photos and uploaded to gradebook:</a>
<ul>
 	 <li>1 picture showing the entire pad</li>
      <li>1 showing the left side (LED strip) in detail</li>
      <li>1 showing the right side (customized area) in detail</li>
  </ul>

<br>

<img src="../2018-fall-6810/images/multi-touch-pad/pset1-example1.png" width="220px">
<img src="../2018-fall-6810/images/multi-touch-pad/pset1-example2.png" width="260px">
<!-- <img src="../2018-fall-6810/images/multi-touch-pad/pset1-example3.png" width="260px">
<img src="../2018-fall-6810/images/multi-touch-pad/pset1-example4.png" width="240px"> -->
<img src="../2018-fall-6810/images/multi-touch-pad/pset1-example5.png" width="260px">

<br><br>
<hr>


<a id="pset2" class="anchor"><h3 style="padding-bottom:5px">pset2 (due Oct. 5, 1pm): insert LEDs, add USB connecting and solder everything</h3></a>
<!-- <span style="color:red">Please wait until tutorial Sept. 26. Things might still slightly change.</span> -->

<br>
<h4>Grading pset2: electronics (25 points total): </h4>
	<ul>
        <li>finished all steps: 8 points</li>
        <li>LEDs turn on: 4 points</li>
        <li>correct resistor used: 3 points</li>
        <li>switch works: 3 points</li>
        <li>USB cable works: 3 points</li>
        <li>circuit is correct: 2 points</li>
        <li>USB cable is twisted: 1 point</li>
        <li>soldered connections look good: 1 point</li>
      </ul>

   <br><br>

<h4>Add LEDs and Resistor</h4><br>

Prototype the LED setup first using the breadboard and the microcontroller 5V power source.<br><br>

Test 1 LED with a resistor on breadboard first. Your LEDs are rated to have a 3.1 voltage drop and can have up to 20mA of current running through them, but you might want much less to be safe. Figure out what resistor you should use and check that you LED lights up. <br> <br>

<img src="../2018-fall-6810/images/multi-touch-pad/arduino-software.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/electronics-1led.png" width="300px"><br> <br>

Extend your circuit to 7 LEDs as shown in the diagram, and adjust resistor as necessary. Does it light up? <br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/circuit-diagram.png" width="500px"><br> <br>

Remove LEDs from breadboard and plug them into your acrylic sheet (all long legs on one side).<br> <br>
<img src="../2018-fall-6810/images/multi-touch-pad/led-legs1.jpg" width="500px"><br> <br>

Bend LED legs to connect them to each other (they will not hold yet, but you are going to solder them in a minute).<br> <br>

<img src="../2018-fall-6810/images/multi-touch-pad/led-legs2.jpg" width="500px"><br> <br>

Solder them.<br> <br>

<img src="../2018-fall-6810/images/multi-touch-pad/led-legs3.jpg" width="500px"><br> <br>

Test with the Microcontroller's 5V and GND if they still all light up.<br> <br>

<img src="../2018-fall-6810/images/multi-touch-pad/led-legs4.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/led-legs5.jpg" width="130px"><br> <br>


<h4>Add Resistor + Switch</h4><br> <br>

Now unplug the resistor from the breadboard and add it into the hole on the multi-touch pad.<br>
The resistor leg facing outwards connects to the legs of the LEDs, solder it.<br> <br>

<img src="../2018-fall-6810/images/multi-touch-pad/resistor1.jpg" width="400px">
<img src="../2018-fall-6810/images/multi-touch-pad/resistor2.jpg" width="400px"><br> <br>


Now insert switch into the hole for the switch. <br>
The resistor leg that points inwards will connect to the middle of the switch, solder it.<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/resistor3.jpg" width="400px"><br> <br>

Test if the switch works with Microcontroller's 5V (on the top or bottom leg of switch) and GND (on the inside facing LED leg). Move switch, does it work?<br> <br>

<!-- <span style="color:red">image missing</span> -->

<br> <br>

<h4>Create USB Cable</h4><br><br>

Create a twisted cable using two cables and a drill.<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/cable1.png" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/cable2.png" width="300px"><br><br>

Solder the two cable ends to the outer two pins of the USB connector. Connect the power and ground exactly as shown in the diagram so that you don't accidentally wire up you LEDs backward!<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/usb1.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb2.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb3.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb4.jpg" width="300px">
<br><br>
Assemble the USB connector and the casing around the cables.<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/usb5.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb6.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb7.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb8.jpg" width="300px">
<img src="../2018-fall-6810/images/multi-touch-pad/usb2.png" width="300px"><br><br>

Solder the end of the cables to your touch pad.<br><br>
<img src="../2018-fall-6810/images/multi-touch-pad/usb9.jpg" width="400px"><br><br>

Connect the USB cable to your laptop, do the LEDs light up (make sure the switch is on ;))?<br><br>
<img src="../2018-fall-6810/images/multi-touch-pad/usb-done.png" width="300px"><br><br>

<br> <br>
  <h4>Done! Take a video and upload to gradebook</h4><br>

<a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766243" style="color:red">Take a video showing how you turn on/off the LEDs using the switch and upload to gradebook here.</a>

<br><br>

<video width="560" height="315" controls muted>
  <source src="https://groups.csail.mit.edu/hcie/files/classes/engineering-interactive-technologies/2018-fall/multi-touch-videos/multitouch-pset2-video1.m4v" type="video/mp4">
</video>


<video width="560" height="315" controls muted>
  <source src="https://groups.csail.mit.edu/hcie/files/classes/engineering-interactive-technologies/2018-fall/multi-touch-videos/multitouch-pset2-video2.mp4" type="video/mp4">
</video>

<video width="560" height="315" controls muted>
  <source src="https://groups.csail.mit.edu/hcie/files/classes/engineering-interactive-technologies/2018-fall/multi-touch-videos/multitouch-pset2-video3.mp4" type="video/mp4">
</video>

<video width="560" height="315" controls muted>
  <source src="https://groups.csail.mit.edu/hcie/files/classes/engineering-interactive-technologies/2018-fall/multi-touch-videos/multitouch-pset2-video4.mp4" type="video/mp4">
</video>

<br><br>
<hr>

<br><br>

<a id="pset3" class="anchor"><h3 style="padding-bottom:5px">pset3 (due Oct. 19, 1pm): write touch recognition so that you can determine (x,y) location of each finger</h3></a>

<br>
<h4>Grading pset3: touch recognition (25 points total): </h4><br>

If you finished this part completely, you will get full points except when one of these is the case:<br>
 <ul>
      <li>finger tips: not recognized or recognition shaky</li>
      <li>code quality: your code is a mess</li>
      <li>threshold sliders: your interface has no sliders for thresholding but instead only uses hard coded values</li>
      <li>coordinates: the coordinates are not drawn at the finger tips but in a fixed location</li>
      <li>see rubric (above).</li>
  </ul>
<br><br>

<h4>Add Camera</h4><br>

Use some tape or glue to attach the camera onto your touchpad below the LEDs. It may be useful to unscrew the bottom part of the camera.<br>
Connect the camera to your laptop.<br>
Use e.g. skype, to see if the camera image comes up.<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/camera1.jpg" width="200px">
<img src="../2018-fall-6810/images/multi-touch-pad/camera2.jpg" width="320px"><br><br>


<h4>Use OpenCV to extract (x,y) coordinates for each finger</h4><br>

Use OpenCV to display the raw camera image.<br><br>
<img src="../2018-fall-6810/images/multi-touch-pad/frame_image.png" width="320px"><br><br>

Convert the raw camera image to HSV color space. <br><br>
<img src="../2018-fall-6810/images/multi-touch-pad/hsv_image.png" width="320px"><br><br>

Threshold for your LED color (outcome is a black/white image: white is where you color is, black everything else). Create sliders for hmin, hmax, smin, smax, vmin, vmax so you can try around until you find good values since light conditions change. <br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/threshold_image.png" width="320px"><br><br>


Find contours in threshold image.
For this, use OpenCV's findContour function as explained <a href="https://docs.opencv.org/2.4/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html">here</a> and <a href="https://docs.opencv.org/3.3.1/d4/d73/tutorial_py_contours_begin.html">here,</a> which will return you a contour (path of points) for each white blob in your image.  <br>
 (use openCV draw functions to draw them into the image for debugging).
<br><br>
<img src="../2018-fall-6810/images/multi-touch-pad/draw_image.png" width="320px"><br><br>

Only keep the contours that are the size of a finger tip (discard too small or too large contours, again having sliders for this helps, i.e. minArea and maxArea).<br><br>

Find contour center to have touch coordinates. <br>
Fit a circle around contour (fitElipse ()). <br>
Get center of circle for touch coordinate.<br><br>

Draw (x,y) coordinates of each finger tip onto the image.<br><br>

<img src="../2018-fall-6810/images/multi-touch-pad/opencv1.png" width="600px">
<img src="../2018-fall-6810/images/multi-touch-pad/opencv2.png" width="600px"><br><br>

<br> <br>
  <h4>Done! Take a video and upload to gradebook</h4><br>

<a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766245" style="color:red">Take a video showing how you move your fingers on the touch pad and on your computer screen the x,y coordinates are recognized and upload it here.</a>

<br><br>

<hr>
<a id="pset4" class="anchor"><h3 style="padding-bottom:5px">pset4 (due Oct. 26, 1pm): add an application of your choice</h3></a>


<br>
<h4>Grading pset4 (25 points total): </h4>

 <ul>
      <li>you lose points if your application has less than 3 recognized gestures (pinch with two fingers, tap with one finger, use finger width as input etc.) and less than 3 different functions (e.g. select color, adjust line thickness, scale drawing)</li>
      <li>we give up to 5 bonus points that can make up for some of the other lost points in step 1-3 for especially creative and comprehensive solution</li>
  </ul>
</p>
<br><br>
<h4>Write your own application that uses the touchpad</h4><br>

You can come up with any application you like and we are excited to see what you come up with!<br><br>

A boring one, but one that's easy to do is a drawing application:<br>
e.g. finger tip size = thickness of brush<br>
e.g. finger number + short tip = color selection (1 finger yellow, 2 finger blue)<br>
e.g. scaling the drawn image = dragging with two fingers<br>


<br> <br>
  <h4>Once you are done: Take a video and upload to gradebook</h4><br>

<a href="https://learning-modules.mit.edu/gradebook/index.html?uuid=/course/6/fa18/6.810#assignments/38766247" style="color:red">Upload a video of your multi-touch application showing all the gestures you implemented.</a>

<br><br>

<br>

        <br />
        <br />
        <br />
      </section>

      <aside class="col-md-4 pull-left">
         <br /> <br /> <br /> <br />
				 <h4>Pset Steps</h4><br>
				 <ul>
		 			<li><a href="#pset1">pset1 (due Sept. 21, 11.59pm): laser cut and bend the acrylic base</a><br /></li>
		 			<li><a href="#pset2">pset2 (due Oct. 5, 1pm): insert LEDs, add USB connecting and solder everything</a><br /></li>
		 			<li><a href="#pset3">pset3 (due Oct. 19, 1pm): write touch recognition so that you can determine (x,y) location of each finger</a><br /></li>
		 			<li><a href="#pset4">pset4 (due Oct. 26, 1pm): add an application of your choice</a><br /></li>
				</ul>
				<br /> <br /> <br /> <br />
        <img src="../2018-fall-6810/images/multi-touch-pad/iap1.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap2.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad//iap3.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap4.jpg" width="220px">

		<img src="../2018-fall-6810/images/multi-touch-pad/iap5.jpg" width="220px">




        <!-- Publication -->

        <br><br><br><br><br>

        <!-- Publication -->

<!-- <h4>Side Bar</h4><br>

    <ul>
      <li>Prof. Stefanie Mueller (Instructor)</li>
      <li>Lotta-Gili Blumberg (TA)</li>
      <li>Xin Wen (UTA)</li>
      <li>Loren Maggiore (LA)</li>
      <li>Mark Chounlakone (LA)</li>
    </ul>
 -->
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

      </aside>

    </div>
  </div>
  </div>
</section>

<div class="container">
	<div class="row">
		<div class="col-md-12 footer" style="text-align: center;">
			<span class="copyright">
			Since 2017 &copy; MIT CSAIL (HCI Engineering group) [redesign by
			<a href="http://punpongsanon.info/" target="_blank" style="text-decoration:none; border-bottom:0px">
			moji
			</a>].
			All Rights Reserved.

			<a href="http://mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/mit.svg" alt="MIT" class="footer-logo" />
			</a>
			<a href="http://csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/csail.svg" alt="CSAIL" class="footer-logo"/>
			</a>
			<a href="http://hci.csail.mit.edu/" target="_blank" style="text-decoration:none; border-bottom:0px">
			<img src="../../images/logo/hci.svg" alt="HCI" class="footer-logo"/>
			</a>
			</span>
		</div>
	</div>
</div>

<!-- Bootstrap -->
<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
<!-- header -->
<script type="text/javascript" src="../../js/headerstrap-for-subpage.js"></script>

</body>
</html>
